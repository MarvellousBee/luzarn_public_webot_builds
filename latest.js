function a0_0x3484(_0x3118d7,_0x564179){const _0x3e863e=a0_0x3e86();return a0_0x3484=function(_0x3484ca,_0x46b033){_0x3484ca=_0x3484ca-0xcd;let _0x4a76f9=_0x3e863e[_0x3484ca];return _0x4a76f9;},a0_0x3484(_0x3118d7,_0x564179);}function a0_0x3e86(){const _0xce006d=['join','top','7FuLDse','31504083KXYbbB','__11bot_markedReadyPromise','zIndex','src','querySelectorAll','cookie','Highlight\x20successfully\x20scheduled,\x20will\x20be\x20displayed\x20alongside\x20the\x20next\x20message.','DEVMODE_TOKEN','undefined','substring','remove','protocols:','TYPE','scrollY','landing_image_raw','appendChild','Override\x20applied\x20for:\x20','aria-label','DEVMODE_TOKEN\x20detected\x20-\x20using\x20dev\x20website\x20version','img','\x22\x20is\x20too\x20large\x20(','fontFamily','Path=/','false','TEXT',',\x20ICON_SIZE=','smooth','href','observe','CONFIG_OF_11BOT','textContent','alt','attachShadow','send','product-header','.svg','products','onerror','consented_optional','product-read-more-btn','button','number','push','Error\x20fetching\x20image\x20from\x20','position','product-price','createElement','4963608FXtAES','Chatbot\x20TOGGLE\x20configuration\x20loaded:\x20TYPE=','product-empty','https://cdn.jsdelivr.net/gh/MarvellousBee/luzarn_public_webot_builds@latest/latest.css','234070YQOyIb','product-card','WEBSITE_CODENAME','::1','Setting\x20cookie','production','found','ICON_SIZE','product-title','warn','placeholder','body','standard','Successfully\x20displayed\x20','CUSTOM_CSS','escape','link[rel=\x22stylesheet\x22][href*=\x22luzarn_public_webot_builds\x22][href$=\x22latest.css\x22]','link','addEventListener','description','querySelector','chat-message-container','removeEventListener','bytes','11bot.ai','Image\x20of\x20','11bot-chatbot-host','left','reduce','px;\x20overflow:\x20hidden;\x20border-radius:\x208px;\x22>','Max-Age=','setAttribute','head','...','status','chat_ai_image_url','33mIFgGk','stylesheet','landing_image_url','Chatbot\x20running\x20in\x20','minimal','__11bot_deferred_style_injection','script','Product\x20image','toLowerCase','all','height','Searching\x20my\x20data...','initial','lazy','parse','message','list','click','chat-line\x20ai\x20product-message','product_url','scroll','fixed','bottom','ws://','cloneNode','37548UrsPvR','SameSite=Lax','type','3346965vleuFJ','product-thumb','disconnect','Read\x20more','<br/>','Reading...','10SBAOCm','link[data-11bot-widget-style]','aria-expanded','full','<div\x20style=\x22display:\x20flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20width:\x20','innerHTML','length','<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20height=\x2218px\x22\x20viewBox=\x220\x20-960\x20960\x20960\x22\x20width=\x2218px\x22\x20fill=\x22currentColor\x22><path\x20d=\x22M720-120H280v-520l280-280\x2050\x2050q7\x207\x2011.5\x2019t4.5\x2023v14l-44\x20174h258q32\x200\x2056\x2024t24\x2056v80q0\x207-2\x2015t-4\x2015L794-168q-9\x2020-30\x2034t-44\x2014Zm-360-80h360l120-280v-80H480l54-220-174\x20174v406Zm0-406v406-406Zm-80-34v80H160v360h120v80H80v-520h200Z\x22/></svg>','endsWith','chat_ai_image','landing_image','0.0.0.0','CONFIG_OF_11BOT.TOGGLE.TEXT\x20must\x20be\x20a\x20string,\x20got:\x20','No\x20products\x20to\x20show.','div','toUpperCase','-apple-system,\x20BlinkMacSystemFont,\x20\x27Segoe\x20UI\x27,\x20Roboto,\x20Oxygen,\x20Ubuntu,\x20Cantarell,\x20\x27Fira\x20Sans\x27,\x20\x27Droid\x20Sans\x27,\x20\x27Helvetica\x20Neue\x27,\x20Arial,\x20sans-serif','resize',',\x20ICON=','isArray','Invalid\x20configuration:\x20both\x20chat_ai_image_url\x20and\x20chat_ai_image_raw\x20provided.\x20Provide\x20only\x20one\x20or\x20neither.','error','product-actions','data-expanded','CONFIG_OF_11BOT.TOGGLE.TYPE\x20must\x20be\x20one\x20of:\x20','16px','Browsing\x20the\x20website...','classList','style','</div>','CONFIG_OF_11BOT.TOGGLE.ICON\x20must\x20be\x20a\x20string,\x20got:\x20','indexOf','open','name','middlebar','9msNOhY','132qzaLkx','px;\x20height:\x20','image_url','rel','opacity','scrollIntoView','CONFIG_OF_11BOT\x20or\x20OVERRIDES\x20not\x20found;\x20using\x20defaults.','pathname','Failed\x20to\x20fetch\x20SVG\x20from\x20','price','hostname','test','<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20height=\x2218px\x22\x20viewBox=\x220\x20-960\x20960\x20960\x22\x20width=\x2218px\x22\x20fill=\x22currentColor\x22><path\x20d=\x22M720-120H320v-520l280-280\x2050\x2050q7\x207\x2011.5\x2019t4.5\x2023v14l-44\x20174h218q32\x200\x2056\x2024t24\x2056v80q0\x207-1.5\x2015t-4.5\x2015L794-168q-9\x2020-30\x2034t-44\x2014ZM240-640v520H80v-520h160Z\x22/></svg>','function','log','add','ICON','width','TOGGLE','product-list','marked\x20failed\x20to\x20load:','getElementById','chatbot-highlight-overlay','product-image-large','data-11bot-widget-style','onload','&amp;','Set\x20cookie:','shadowRoot','loading','object','redirect_quest','string','location','true','className','CONFIG_OF_11BOT.TOGGLE.TYPE\x20is\x20required','title','https://','CONFIG_OF_11BOT.TOGGLE.ICON_SIZE\x20must\x20be\x20a\x20positive\x20number,\x20got:\x20','scrollX','chat-line\x20ai\x20product-list-container','127.0.0.1:8000','\x20mode,\x20server:\x20','localhost','Redirecting...','slice','includes','Successfully\x20displayed\x20product.\x20Do\x20not\x20list\x20products\x20directly\x20in\x20your\x20next\x20message.\x20Ask\x20the\x20user\x20if\x20they\x20would\x20like\x20to\x20refine\x20their\x20search\x20instead.','getBoundingClientRect','CONFIG_OF_11BOT.TOGGLE.ICON\x20is\x20required\x20for\x20TYPE=','chat_ai_image_raw','prototype','tagName','chat-ai-icon','102ciymIg','&lt;','replace','getAttribute','18363xZYbAJ','stringify','OVERRIDES','marked','<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20height=\x2218px\x22\x20viewBox=\x220\x20-960\x20960\x20960\x22\x20width=\x2218px\x22\x20fill=\x22currentColor\x22><path\x20d=\x22M240-840h440v520L400-40l-50-50q-7-7-11.5-19t-4.5-23v-14l44-174H120q-32\x200-56-24t-24-56v-80q0-7\x202-15t4-15l120-282q9-20\x2030-34t44-14Zm360\x2080H240L120-480v80h360l-54\x20220\x20174-174v-406Zm0\x20406v-406\x20406Zm80\x2034v-80h120v-360H680v-80h200v520H680Z\x22/></svg>','14Birmyo','381696Aplqny'];a0_0x3e86=function(){return _0xce006d;};return a0_0x3e86();}(function(_0x4f6c41,_0x1d624d){const _0x3655f5=a0_0x3484,_0x5ee084=_0x4f6c41();while(!![]){try{const _0x28f20d=parseInt(_0x3655f5(0x1ab))/0x1*(-parseInt(_0x3655f5(0x1a7))/0x2)+parseInt(_0x3655f5(0x16f))/0x3*(-parseInt(_0x3655f5(0x143))/0x4)+parseInt(_0x3655f5(0x106))/0x5*(parseInt(_0x3655f5(0x170))/0x6)+parseInt(_0x3655f5(0xd2))/0x7*(-parseInt(_0x3655f5(0xcf))/0x8)+-parseInt(_0x3655f5(0x146))/0x9*(parseInt(_0x3655f5(0x14c))/0xa)+-parseInt(_0x3655f5(0x12a))/0xb*(parseInt(_0x3655f5(0x102))/0xc)+parseInt(_0x3655f5(0xd3))/0xd*(parseInt(_0x3655f5(0xce))/0xe);if(_0x28f20d===_0x1d624d)break;else _0x5ee084['push'](_0x5ee084['shift']());}catch(_0x248503){_0x5ee084['push'](_0x5ee084['shift']());}}}(a0_0x3e86,0xca2de),(function(){const _0xc46022=a0_0x3484;window[_0xc46022(0xd4)]=null;async function _0xd3b549(){const _0x2ec719=_0xc46022;return!window[_0x2ec719(0x1ae)]&&await _0x3b46bd('https://cdn.jsdelivr.net/npm/marked/marked.min.js'),window['marked'];}function _0x3b46bd(_0x384957){return new Promise((_0x4ca73d,_0x2b0b08)=>{const _0x1a8b3a=a0_0x3484,_0x421066=document[_0x1a8b3a(0x101)](_0x1a8b3a(0x130));_0x421066['src']=_0x384957,_0x421066[_0x1a8b3a(0x189)]=_0x4ca73d,_0x421066[_0x1a8b3a(0xf8)]=_0x2b0b08,document['head'][_0x1a8b3a(0xe2)](_0x421066);});}window[_0xc46022(0xd4)]=_0xd3b549();async function _0x15a979(){const _0x4352d1=_0xc46022;if(typeof marked!==_0x4352d1(0xdb))return marked;!window[_0x4352d1(0xd4)]&&(console['warn']('marked\x20not\x20started\x20yet,\x20starting\x20loader\x20now'),window['__11bot_markedReadyPromise']=_0xd3b549());console['warn']('marked\x20used\x20before\x20load\x20-\x20awaiting\x20marked\x20to\x20finish\x20loading');try{await window['__11bot_markedReadyPromise'];}catch(_0x31161c){console[_0x4352d1(0x10f)](_0x4352d1(0x184),_0x31161c);}return window[_0x4352d1(0x1ae)];}(function(){const _0x5a2345=_0xc46022,_0x6afd8=window[_0x5a2345(0xf0)];if(!_0x6afd8)return;function _0x205b6f(_0x1e0871,_0x438ec0=0x40,_0xabd7d=0x40){const _0x10d7c1=_0x5a2345;try{const _0x481bf6=_0x1e0871[_0x10d7c1(0x132)]()[_0x10d7c1(0x154)](_0x10d7c1(0xf6));if(_0x481bf6){const _0x2f4551=new XMLHttpRequest();_0x2f4551['open']('GET',_0x1e0871,![]),_0x2f4551[_0x10d7c1(0xf4)]();if(_0x2f4551[_0x10d7c1(0x128)]>=0xc8&&_0x2f4551[_0x10d7c1(0x128)]<0x12c){const _0x59a3c4=_0x2f4551['responseText'];return'<div\x20style=\x22display:\x20flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20width:\x20'+_0x438ec0+_0x10d7c1(0x171)+_0xabd7d+_0x10d7c1(0x123)+_0x59a3c4+_0x10d7c1(0x169);}else return console[_0x10d7c1(0x10f)](_0x10d7c1(0x178)+_0x1e0871+':\x20'+_0x2f4551['status']),null;}else return _0x10d7c1(0x150)+_0x438ec0+'px;\x20height:\x20'+_0xabd7d+'px;\x20overflow:\x20hidden;\x20border-radius:\x208px;\x22><img\x20src=\x22'+_0x1e0871+'\x22\x20style=\x22max-width:\x20100%;\x20max-height:\x20100%;\x20object-fit:\x20contain;\x22\x20/></div>';}catch(_0x4cce0f){return console[_0x10d7c1(0x10f)](_0x10d7c1(0xfe)+_0x1e0871+':',_0x4cce0f),null;}}if(_0x6afd8[_0x5a2345(0x12c)]&&_0x6afd8['landing_image_raw'])throw new Error('Invalid\x20configuration:\x20both\x20landing_image_url\x20and\x20landing_image_raw\x20provided.\x20Provide\x20only\x20one\x20or\x20neither.');if(_0x6afd8[_0x5a2345(0x12c)]){const _0x5397a9=_0x205b6f(_0x6afd8['landing_image_url'],0xc8,0xc8);_0x5397a9?_0x6afd8[_0x5a2345(0x156)]=_0x5397a9:_0x6afd8[_0x5a2345(0x156)]=_0x6afd8[_0x5a2345(0x12c)];}else _0x6afd8[_0x5a2345(0xe1)]&&(_0x6afd8['landing_image']=_0x6afd8[_0x5a2345(0xe1)]);if(_0x6afd8[_0x5a2345(0x129)]&&_0x6afd8[_0x5a2345(0x1a3)])throw new Error(_0x5a2345(0x160));if(_0x6afd8[_0x5a2345(0x129)]){const _0x10bda7=_0x205b6f(_0x6afd8[_0x5a2345(0x129)],0x1e,0x1e);_0x10bda7?_0x6afd8[_0x5a2345(0x155)]=_0x10bda7:_0x6afd8[_0x5a2345(0x155)]=_0x6afd8[_0x5a2345(0x129)];}else _0x6afd8['chat_ai_image_raw']&&(_0x6afd8[_0x5a2345(0x155)]=_0x6afd8[_0x5a2345(0x1a3)]);}());let OVERRIDABLE={user_tag(){return'anonymous';}};const _0x12b1b2=!!(HTMLElement['prototype']&&HTMLElement[_0xc46022(0x1a4)][_0xc46022(0xf3)]);let _0x9b257b=null,_0x4d1d4e=null;if(_0x12b1b2)try{_0x9b257b=document[_0xc46022(0x185)](_0xc46022(0x120));!_0x9b257b&&(_0x9b257b=document['createElement'](_0xc46022(0x15a)),_0x9b257b['id']='11bot-chatbot-host',_0x9b257b[_0xc46022(0x168)][_0xc46022(0x133)]=_0xc46022(0x136),_0x9b257b[_0xc46022(0x168)][_0xc46022(0xff)]=_0xc46022(0x13f),_0x9b257b[_0xc46022(0x168)][_0xc46022(0xd5)]='2147483647',_0x9b257b[_0xc46022(0x168)][_0xc46022(0x140)]=_0xc46022(0x165),_0x9b257b[_0xc46022(0x168)]['right']='16px',_0x9b257b[_0xc46022(0x168)][_0xc46022(0xe8)]=_0xc46022(0x15c),document[_0xc46022(0x111)]['appendChild'](_0x9b257b));!_0x9b257b[_0xc46022(0x18c)]?_0x4d1d4e=_0x9b257b[_0xc46022(0xf3)]({'mode':_0xc46022(0x16c)}):_0x4d1d4e=_0x9b257b[_0xc46022(0x18c)];const _0x41ce79=document[_0xc46022(0x101)](_0xc46022(0x168));_0x41ce79['textContent']=':host\x20{\x20all:\x20initial;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20*,\x20*::before,\x20*::after\x20{\x20box-sizing:\x20border-box;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.chatbot-wrapper\x20{\x20position:\x20relative;\x20font-family:\x20inherit;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20button,\x20textarea\x20{\x20font-family:\x20inherit;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.chatbot-launcher\x20{\x20position:\x20fixed;\x20bottom:\x200;\x20right:\x200;\x20}',_0x4d1d4e[_0xc46022(0xe2)](_0x41ce79);const _0x14fa0a=_0xc46022(0x105);function _0x21a12f(_0x1eea3f){const _0x18cfef=_0xc46022;if(!_0x4d1d4e)return;const _0x26197d=_0x4d1d4e[_0x18cfef(0x11a)](_0x18cfef(0x14d)),_0x1ee3a0=_0x1eea3f||_0x14fa0a;if(_0x26197d){_0x26197d[_0x18cfef(0x1aa)]('href')!==_0x1ee3a0&&_0x26197d[_0x18cfef(0x125)](_0x18cfef(0xee),_0x1ee3a0);return;}let _0x4d0c21=document['querySelector'](_0x18cfef(0x116)),_0x281789;if(_0x4d0c21){_0x281789=_0x4d0c21[_0x18cfef(0x142)](!![]);if(_0x1eea3f)_0x281789['href']=_0x1ee3a0;}else _0x281789=document[_0x18cfef(0x101)](_0x18cfef(0x117)),_0x281789[_0x18cfef(0x173)]=_0x18cfef(0x12b),_0x281789['href']=_0x1ee3a0;_0x281789[_0x18cfef(0x125)](_0x18cfef(0x188),'1');try{_0x4d1d4e[_0x18cfef(0xe2)](_0x281789);}catch(_0x133f25){}}window[_0xc46022(0x12f)]=_0x21a12f;try{const _0x3ad6c2=new MutationObserver(_0x4754f2=>{const _0x5865cf=_0xc46022;for(const _0x35ccf5 of _0x4754f2){for(const _0x2fba62 of _0x35ccf5['addedNodes']){if(_0x2fba62[_0x5865cf(0x1a5)]==='LINK'&&/luzarn_public_webot_builds/['test'](_0x2fba62[_0x5865cf(0x1aa)](_0x5865cf(0xee))||'')){_0x21a12f(),_0x3ad6c2['disconnect']();return;}}}});if(document[_0xc46022(0x126)])_0x3ad6c2[_0xc46022(0xef)](document[_0xc46022(0x126)],{'childList':!![],'subtree':![]});setTimeout(()=>{const _0x2aa0cf=_0xc46022;try{_0x3ad6c2[_0x2aa0cf(0x148)]();}catch(_0x5f28fa){}},0x1388);}catch(_0x79a107){}}catch(_0x64624d){_0x4d1d4e=null,_0x9b257b=null;}const _0x161d21=()=>_0x4d1d4e||document[_0xc46022(0x111)];function _0x4ecf45(_0xb2f709){const _0x1596e7=_0xc46022;if(_0x4d1d4e)return _0x4d1d4e[_0x1596e7(0x11a)](_0xb2f709);return document[_0x1596e7(0x11a)](_0xb2f709);}function _0x2d74a0(_0x435c7c){const _0xeb6092=_0xc46022;if(_0x4d1d4e)return _0x4d1d4e[_0xeb6092(0xd7)](_0x435c7c);return document[_0xeb6092(0xd7)](_0x435c7c);}function _0x4d0b9c(_0x24a2a6){const _0x39f039=_0xc46022;if(_0x4d1d4e)return _0x4d1d4e['querySelector']('#'+CSS[_0x39f039(0x115)](_0x24a2a6));return document['getElementById'](_0x24a2a6);}const _0x36cba4=_0xc46022(0x19a),_0x2397b7=_0xc46022(0x11e),_0x1ab8bd='http://',_0x2bd8df=_0xc46022(0x196),_0x1da953=_0xc46022(0x141),_0x3dba40='wss://',_0x4896ca=CONFIG_OF_11BOT['USE_LOCAL_DEPLOYMENT']===!![],_0x1be9cd=_0x4896ca?_0x36cba4:_0x2397b7,_0x1c8f97=_0x4896ca?_0x1ab8bd:_0x2bd8df,_0x17301d=_0x4896ca?_0x1da953:_0x3dba40,_0xa80327=CONFIG_OF_11BOT[_0xc46022(0xda)]||null,_0x504756=CONFIG_OF_11BOT[_0xc46022(0x108)]||null;!_0x504756&&console[_0xc46022(0x161)]('WEBSITE_CODENAME\x20is\x20required.\x20Please\x20set\x20it\x20in\x20CONFIG_OF_11BOT.');_0xa80327&&console[_0xc46022(0x17e)](_0xc46022(0xe5));try{const _0x36818b=[_0xc46022(0x19c),_0xc46022(0x157),_0xc46022(0x109)]['includes'](location[_0xc46022(0x17a)])||/^127\./[_0xc46022(0x17b)](location['hostname']),_0x1663c1='http://127.0.0.1:8000/serve/latest.css',_0x84fb35=_0x4896ca||_0x36818b?_0x1663c1:_0xc46022(0x105);window[_0xc46022(0x12f)]&&window['__11bot_deferred_style_injection'](_0x84fb35);if(CONFIG_OF_11BOT[_0xc46022(0x114)]&&_0x4d1d4e){const _0x11320e=document[_0xc46022(0x101)](_0xc46022(0x168));_0x11320e[_0xc46022(0xf1)]=CONFIG_OF_11BOT[_0xc46022(0x114)],_0x4d1d4e[_0xc46022(0xe2)](_0x11320e);}}catch(_0x271796){}console[_0xc46022(0x17e)](_0xc46022(0x12d)+(_0x4896ca?'development':_0xc46022(0x10b))+_0xc46022(0x19b)+_0x1be9cd),console[_0xc46022(0x17e)](_0xc46022(0xde),{'HTTP_PROTOCOL':_0x1c8f97,'WS_PROTOCOL':_0x17301d});const _0x5d358d={'consult_knowledge_base':_0xc46022(0x135),'list_redirect_urls':_0xc46022(0x166),'get_info_from_html':_0xc46022(0x14b),'redirect':_0xc46022(0x19d),'Intermediate_Answer':'Browsing\x20the\x20web...','save_customer_contact_information':'Saving\x20contact\x20information...'};if(typeof CONFIG_OF_11BOT==='object'&&CONFIG_OF_11BOT!==null&&CONFIG_OF_11BOT[_0xc46022(0x1ad)])for(const _0x2faced in OVERRIDABLE){if(CONFIG_OF_11BOT[_0xc46022(0x1ad)][_0x2faced]){if(typeof CONFIG_OF_11BOT['OVERRIDES'][_0x2faced]===_0xc46022(0x17d))OVERRIDABLE[_0x2faced]=CONFIG_OF_11BOT[_0xc46022(0x1ad)][_0x2faced];else throw new Error('CONFIG_OF_11BOT.OVERRIDES.'+_0x2faced+'\x20must\x20be\x20a\x20function');console[_0xc46022(0x17e)](_0xc46022(0xe3)+_0x2faced);}}else console['warn'](_0xc46022(0x176));const _0x356104=OVERRIDABLE['user_tag']();let _0x2278fd=null,_0x53ec41=0x22,_0x11497b=null,_0x4cf768=null;if(CONFIG_OF_11BOT&&CONFIG_OF_11BOT['TOGGLE']){const _0x124ef6=CONFIG_OF_11BOT[_0xc46022(0x182)];if(!_0x124ef6['TYPE'])throw new Error(_0xc46022(0x194));const _0x5e303d=[_0xc46022(0x12e),_0xc46022(0x112),_0xc46022(0x14f),'hidden',_0xc46022(0x16e)];if(!_0x5e303d[_0xc46022(0x19f)](_0x124ef6[_0xc46022(0xdf)]))throw new Error(_0xc46022(0x164)+_0x5e303d['join'](',\x20')+',\x20got:\x20'+_0x124ef6['TYPE']);if(_0x124ef6[_0xc46022(0xdf)]!=='hidden'){if(!_0x124ef6['ICON'])throw new Error(_0xc46022(0x1a2)+_0x124ef6[_0xc46022(0xdf)]);if(typeof _0x124ef6[_0xc46022(0x180)]!==_0xc46022(0x190))throw new Error(_0xc46022(0x16a)+typeof _0x124ef6[_0xc46022(0x180)]);}if(_0x124ef6['ICON_SIZE']!==undefined){if(typeof _0x124ef6[_0xc46022(0x10d)]!==_0xc46022(0xfc)||_0x124ef6['ICON_SIZE']<=0x0)throw new Error(_0xc46022(0x197)+_0x124ef6[_0xc46022(0x10d)]);_0x53ec41=_0x124ef6[_0xc46022(0x10d)];}if(_0x124ef6[_0xc46022(0xdf)]===_0xc46022(0x16e)){if(!_0x124ef6[_0xc46022(0xeb)])throw new Error('CONFIG_OF_11BOT.TOGGLE.TEXT\x20is\x20required\x20for\x20TYPE=middlebar');if(typeof _0x124ef6['TEXT']!==_0xc46022(0x190))throw new Error(_0xc46022(0x158)+typeof _0x124ef6[_0xc46022(0xeb)]);_0x4cf768=_0x124ef6[_0xc46022(0xeb)];}_0x2278fd=_0x124ef6['ICON']||null,_0x11497b=_0x124ef6[_0xc46022(0xdf)],console['log'](_0xc46022(0x103)+_0x124ef6[_0xc46022(0xdf)]+_0xc46022(0xec)+_0x53ec41+(_0x4cf768?',\x20TEXT='+_0x4cf768:'')+(_0x2278fd?_0xc46022(0x15e)+_0x2278fd[_0xc46022(0xdc)](0x0,0x32)+_0xc46022(0x127):''));}const _0x2196b0=_0xc46022(0x153),_0x9e2550=_0xc46022(0x17c),_0x5d7999=_0xc46022(0xcd),_0x4e8c2c='<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20height=\x2218px\x22\x20viewBox=\x220\x20-960\x20960\x20960\x22\x20width=\x2218px\x22\x20fill=\x22currentColor\x22><path\x20d=\x22M240-840h400v520L360-40l-50-50q-7-7-11.5-19t-4.5-23v-14l44-174H120q-32\x200-56-24t-24-56v-80q0-7\x201.5-15t4.5-15l120-282q9-20\x2030-34t44-14Zm480\x20520v-520h160v520H720Z\x22/></svg>';function _0x2570da(_0x5b1a4b){return new Promise(_0x9b89a5=>setTimeout(_0x9b89a5,_0x5b1a4b));}function _0x55c3de(){const _0x2b2e5e=_0xc46022,_0x481808=window[_0x2b2e5e(0x191)][_0x2b2e5e(0x177)];return _0x4adbcd(_0x481808);}function _0x4adbcd(_0x44efa8){const _0x2ab0a1=_0xc46022,_0x2bb3fb=_0x44efa8[_0x2ab0a1(0x16b)](_0x36cba4);_0x2bb3fb!==-0x1&&(_0x44efa8=_0x44efa8[_0x2ab0a1(0x19e)](_0x2bb3fb+_0x36cba4[_0x2ab0a1(0x152)]));const _0xd04227=_0x44efa8[_0x2ab0a1(0x16b)]('/');return _0xd04227!==-0x1?_0x44efa8=_0x44efa8[_0x2ab0a1(0x19e)](_0xd04227):_0x44efa8='/'+_0x44efa8,_0x44efa8;}function _0x4b604f(_0x526e54){const _0xf96ea0=_0xc46022;return encodeURIComponent(JSON[_0xf96ea0(0x1ac)](_0x526e54));}function _0x5a3d82(_0x370b12){const _0x1e41ac=_0xc46022;try{return JSON[_0x1e41ac(0x138)](decodeURIComponent(_0x370b12));}catch(_0x9818ba){return null;}}function _0x10a6f4(_0x4c8271){const _0x1f840e=location['hostname']||'',_0x339951=_0x504756||'';return _0x4c8271+'__'+_0x1f840e+'__'+_0x339951;}function _0x210d0a(_0x26779f){const _0x5e7560=_0xc46022,_0x1d9107=_0x10a6f4(_0x26779f),_0x54a328=document[_0x5e7560(0xd8)]['split'](';\x20')[_0x5e7560(0x122)]((_0x3a67b4,_0x3a31c6)=>{const _0x449d07=_0x5e7560,_0x4bfaf0=_0x3a31c6[_0x449d07(0x16b)]('=');if(_0x4bfaf0===-0x1)return _0x3a67b4;const _0x168ab1=_0x3a31c6['slice'](0x0,_0x4bfaf0),_0x482240=_0x3a31c6[_0x449d07(0x19e)](_0x4bfaf0+0x1);return _0x3a67b4[_0x168ab1]=_0x482240,_0x3a67b4;},{});if(_0x54a328[_0x1d9107])return _0x5a3d82(_0x54a328[_0x1d9107]);return null;}function _0x2a7582(_0x1894fe,_0x3b06f6,_0x26df83,_0x5d83e4=!![]){const _0x4ce71f=_0xc46022;if(!_0x5d83e4){const _0xbc1217=_0x210d0a(_0x4ce71f(0xf9));if(!_0xbc1217)return;}console[_0x4ce71f(0x17e)](_0x4ce71f(0x10a),_0x1894fe);const _0x100d84=_0x4b604f(_0x3b06f6),_0x1e6909=[];_0x1e6909['push'](_0x10a6f4(_0x1894fe)+'='+_0x100d84);if(_0x26df83)_0x1e6909[_0x4ce71f(0xfd)](_0x4ce71f(0x124)+_0x26df83*0x18*0x3c*0x3c);_0x1e6909[_0x4ce71f(0xfd)]('Path=/'),_0x1e6909[_0x4ce71f(0xfd)](_0x4ce71f(0x144));const _0x23d2b4=_0x1e6909[_0x4ce71f(0xd0)](';'),_0x5c0079=new Blob([_0x23d2b4])['size'];_0x5c0079>0xf9f&&console[_0x4ce71f(0x10f)]('Cookie\x20\x22'+_0x1894fe+_0x4ce71f(0xe7)+_0x5c0079+'\x20bytes).\x20Browser\x20may\x20reject\x20it.\x20Consider\x20using\x20localStorage\x20instead.'),document[_0x4ce71f(0xd8)]=_0x23d2b4,console[_0x4ce71f(0x17e)](_0x4ce71f(0x18b),_0x1894fe,'size:',_0x5c0079,_0x4ce71f(0x11d));}function _0x5deafd(_0x220f95){const _0x4045d1=_0xc46022,_0x1422c7=[];_0x1422c7['push'](_0x10a6f4(_0x220f95)+'='),_0x1422c7[_0x4045d1(0xfd)]('Max-Age=0'),_0x1422c7[_0x4045d1(0xfd)](_0x4045d1(0xe9)),_0x1422c7[_0x4045d1(0xfd)](_0x4045d1(0x144)),document[_0x4045d1(0xd8)]=_0x1422c7[_0x4045d1(0xd0)](';');}function _0x50c498(_0x61ca7d,_0x502869){_0x2a7582('redirect_quest',{'url':_0x61ca7d,'reply_channel':_0x502869},0x1);}function _0x120601(){const _0x3830cd=_0xc46022,_0x57a5c2=_0x210d0a(_0x3830cd(0x18f));if(_0x57a5c2)return _0x5deafd('redirect_quest'),_0x57a5c2;return null;}let _0x146710=null;function _0x279fca(_0x1aeb3d){const _0x422ac1=_0xc46022;if(!_0x1aeb3d)return'Highlight\x20failed:\x20no\x20element\x20provided';try{return _0x146710=_0x1aeb3d,_0x422ac1(0xd9);}catch(_0x4c7382){return'Highlight\x20failed:\x20'+_0x4c7382[_0x422ac1(0x139)];}}function _0x5004d8(){const _0x293530=_0xc46022,_0x5c70aa=_0x146710;if(!_0x5c70aa)return;_0x146710=null;try{try{const _0x22b9b5=_0x4d0b9c(_0x293530(0x186));if(_0x22b9b5)_0x22b9b5[_0x293530(0xdd)]();}catch(_0x1944eb){}const _0x415545=document[_0x293530(0x101)](_0x293530(0x15a));_0x415545['id']=_0x293530(0x186),_0x415545[_0x293530(0x193)]=_0x293530(0x186),(_0x4d1d4e||document[_0x293530(0x111)])[_0x293530(0xe2)](_0x415545);function _0x3ebcfa(){const _0x33519f=_0x293530,_0x356291=_0x5c70aa[_0x33519f(0x1a1)]();_0x415545['style'][_0x33519f(0xd1)]=window[_0x33519f(0xe0)]+_0x356291['top']-0x5+'px',_0x415545['style'][_0x33519f(0x121)]=window[_0x33519f(0x198)]+_0x356291[_0x33519f(0x121)]-0x5+'px',_0x415545['style'][_0x33519f(0x181)]=_0x356291[_0x33519f(0x181)]+0xa+'px',_0x415545[_0x33519f(0x168)][_0x33519f(0x134)]=_0x356291[_0x33519f(0x134)]+0xa+'px';}_0x3ebcfa(),window['addEventListener'](_0x293530(0x15d),_0x3ebcfa),window['addEventListener']('scroll',_0x3ebcfa,!![]),setTimeout(()=>{const _0x262810=_0x293530;try{_0x415545[_0x262810(0xdd)]();}catch(_0x4cc1fe){}window[_0x262810(0x11c)]('resize',_0x3ebcfa),window['removeEventListener'](_0x262810(0x13e),_0x3ebcfa,!![]);},0x7d0);try{_0x5c70aa[_0x293530(0x175)]({'behavior':_0x293530(0xed),'block':'center'});}catch(_0xf4958){}}catch(_0x1b6abd){}}function _0x9c2e43(_0x29eced){const _0x304666=_0xc46022;let _0x24b360=_0x29eced;if(typeof _0x24b360===_0x304666(0x190))try{_0x24b360=JSON[_0x304666(0x138)](_0x24b360);}catch(_0x2f5196){}if(Array['isArray'](_0x24b360))return{'list':_0x24b360,'found':!![]};if(_0x24b360&&typeof _0x24b360==='object'){if(Array['isArray'](_0x24b360[_0x304666(0xf7)]))return{'list':_0x24b360[_0x304666(0xf7)],'found':!![]};const _0x5b2e8e=_0x24b360[_0x304666(0xf7)]&&typeof _0x24b360['products']===_0x304666(0x18e)?_0x24b360[_0x304666(0xf7)][_0x304666(0xf7)]:undefined;if(Array[_0x304666(0x15f)](_0x5b2e8e))return{'list':_0x5b2e8e,'found':!![]};}return{'list':[],'found':![]};}next_is_bot_message=![];function _0xebbb3b(_0x589b10,_0x395037=![]){const _0x110a33=_0xc46022,_0x5a449c=document[_0x110a33(0x101)](_0x110a33(0x15a));_0x5a449c[_0x110a33(0x193)]=_0x110a33(0x11b);if(chat_ai_image!==null){const _0x46953e=document[_0x110a33(0x101)](_0x110a33(0x15a));_0x46953e[_0x110a33(0x193)]=_0x110a33(0x1a6),_0x46953e[_0x110a33(0x168)][_0x110a33(0x174)]=next_is_bot_message&&!_0x395037?'1':'0',_0x46953e[_0x110a33(0x151)]=chat_ai_image,_0x5a449c[_0x110a33(0xe2)](_0x46953e);}_0x589b10[_0x110a33(0x167)][_0x110a33(0x17f)]('chat-message-element'),_0x5a449c[_0x110a33(0xe2)](_0x589b10),messagesEl[_0x110a33(0xe2)](_0x5a449c),next_is_bot_message&&!_0x395037&&(next_is_bot_message=![]);}function _0x10e79c(_0x97321={}){const _0x4e3832=_0xc46022,_0x141cc4=_0x97321&&typeof _0x97321===_0x4e3832(0x18e)?_0x97321:{},_0x203fd7=_0x141cc4?.[_0x4e3832(0x16d)]??'',_0x173caf=_0x141cc4?.[_0x4e3832(0x179)]??'',_0x2dc391=_0x141cc4?.[_0x4e3832(0x119)]??'',_0x3cf33e=_0x141cc4?.[_0x4e3832(0x172)]??'',_0x418549=_0x141cc4?.[_0x4e3832(0x13d)]??'',_0x1cbdd3=document[_0x4e3832(0x101)]('div');_0x1cbdd3[_0x4e3832(0x193)]=_0x4e3832(0x13c);const _0x5bd67e=document[_0x4e3832(0x101)](_0x4e3832(0x15a));_0x5bd67e[_0x4e3832(0x193)]=_0x4e3832(0x183);const _0x525830=_0x1bc879=>{const _0x35b031=_0x4e3832;if(_0x1bc879===null||_0x1bc879===undefined)return'';return String(_0x1bc879)[_0x35b031(0x1a9)](/[&<>"]/g,_0x1808e4=>({'&':_0x35b031(0x18a),'<':_0x35b031(0x1a8),'>':'&gt;','\x22':'&quot;'}[_0x1808e4]));},_0x22c63b=document['createElement'](_0x4e3832(0x15a));_0x22c63b[_0x4e3832(0x193)]=_0x4e3832(0x107),_0x22c63b['setAttribute'](_0x4e3832(0x163),_0x4e3832(0xea));const _0x4173a=document[_0x4e3832(0x101)](_0x4e3832(0xfb));_0x4173a[_0x4e3832(0x145)]=_0x4e3832(0xfb),_0x4173a[_0x4e3832(0x193)]='product-header',_0x4173a[_0x4e3832(0x125)](_0x4e3832(0x14e),_0x4e3832(0x192));const _0x361a8e=document[_0x4e3832(0x101)](_0x4e3832(0x15a));_0x361a8e['className']=_0x4e3832(0x147);if(_0x3cf33e){const _0x1e1e34=document[_0x4e3832(0x101)](_0x4e3832(0xe6));_0x1e1e34[_0x4e3832(0xd6)]=_0x3cf33e,_0x1e1e34['alt']=_0x203fd7?'Image\x20of\x20'+_0x203fd7:_0x4e3832(0x131),_0x1e1e34[_0x4e3832(0x18d)]=_0x4e3832(0x137),_0x1e1e34[_0x4e3832(0xf8)]=()=>{const _0x3db08b=_0x4e3832;try{_0x361a8e[_0x3db08b(0x167)][_0x3db08b(0x17f)](_0x3db08b(0x110)),_0x361a8e['textContent']=(_0x203fd7||'')[0x0]?.[_0x3db08b(0x15b)]()||'•',_0x1e1e34[_0x3db08b(0xdd)]();}catch(_0x58f10e){}},_0x361a8e[_0x4e3832(0xe2)](_0x1e1e34);}else _0x361a8e[_0x4e3832(0x167)][_0x4e3832(0x17f)](_0x4e3832(0x110)),_0x361a8e['textContent']=(_0x203fd7||'')[0x0]?.[_0x4e3832(0x15b)]()||'•';const _0xf4c004=document[_0x4e3832(0x101)]('div');_0xf4c004[_0x4e3832(0x193)]='product-title-price';const _0x328188=document[_0x4e3832(0x101)](_0x4e3832(0x15a));_0x328188['className']=_0x4e3832(0x10e),_0x328188[_0x4e3832(0xf1)]=_0x203fd7||'Untitled';const _0xd42d7d=document[_0x4e3832(0x101)](_0x4e3832(0x15a));_0xd42d7d[_0x4e3832(0x193)]=_0x4e3832(0x100),_0xd42d7d[_0x4e3832(0xf1)]=_0x173caf||'',_0xf4c004[_0x4e3832(0xe2)](_0x328188),_0xf4c004[_0x4e3832(0xe2)](_0xd42d7d),_0x4173a[_0x4e3832(0xe2)](_0x361a8e),_0x4173a['appendChild'](_0xf4c004);const _0x251020=document[_0x4e3832(0x101)]('div');_0x251020['className']='product-body';if(_0x3cf33e){const _0x207b5a=document[_0x4e3832(0x101)](_0x4e3832(0xe6));_0x207b5a[_0x4e3832(0x193)]=_0x4e3832(0x187),_0x207b5a[_0x4e3832(0xd6)]=_0x3cf33e,_0x207b5a[_0x4e3832(0xf2)]=_0x203fd7?'Image\x20of\x20'+_0x203fd7:'Product\x20image',_0x207b5a[_0x4e3832(0x18d)]=_0x4e3832(0x137),_0x251020['appendChild'](_0x207b5a);}if(_0x2dc391){const _0x2c5b23=document[_0x4e3832(0x101)](_0x4e3832(0x15a));_0x2c5b23[_0x4e3832(0x193)]='product-description',_0x2c5b23[_0x4e3832(0x151)]=_0x525830(_0x2dc391)['replace'](/\n/g,'<br/>'),_0x251020[_0x4e3832(0xe2)](_0x2c5b23);}const _0x234f0f=document['createElement'](_0x4e3832(0x15a));_0x234f0f[_0x4e3832(0x193)]='product-actions';if(_0x418549){const _0x26b34c=document['createElement']('a');_0x26b34c[_0x4e3832(0x193)]=_0x4e3832(0xfa),_0x26b34c[_0x4e3832(0x195)]=_0x4e3832(0x149),_0x26b34c['setAttribute'](_0x4e3832(0xe4),_0x4e3832(0x149)),_0x26b34c[_0x4e3832(0xf1)]='Read\x20more',_0x26b34c['href']=_0x418549,_0x26b34c[_0x4e3832(0x193)]=_0x4e3832(0xfa),_0x234f0f[_0x4e3832(0xe2)](_0x26b34c);}return _0x251020[_0x4e3832(0xe2)](_0x234f0f),_0x4173a[_0x4e3832(0x118)](_0x4e3832(0x13b),()=>{const _0x343af6=_0x4e3832,_0x1f9ee8=_0x22c63b[_0x343af6(0x1aa)]('data-expanded')===_0x343af6(0x192);_0x22c63b[_0x343af6(0x125)](_0x343af6(0x163),String(!_0x1f9ee8)),_0x4173a[_0x343af6(0x125)](_0x343af6(0x14e),String(!_0x1f9ee8));}),_0x22c63b[_0x4e3832(0xe2)](_0x4173a),_0x22c63b[_0x4e3832(0xe2)](_0x251020),_0x5bd67e[_0x4e3832(0xe2)](_0x22c63b),_0x1cbdd3[_0x4e3832(0xe2)](_0x5bd67e),_0xebbb3b(_0x1cbdd3),scrollToBottom(!![]),updateFollowerPosition(),_0x5004d8(),_0x4e3832(0x1a0);}function _0x4b4b1c(_0x36771a,{fallbackToLastQuery:fallbackToLastQuery=![]}={}){const _0x326bad=_0xc46022,_0x46d812=_0x9c2e43(_0x36771a);let _0x5db205=_0x46d812[_0x326bad(0x13a)],_0x792cc7=_0x46d812[_0x326bad(0x10c)];if(!_0x792cc7&&fallbackToLastQuery){const _0x4ef850=_0x9c2e43(last_query_output);_0x5db205=_0x4ef850[_0x326bad(0x13a)],_0x792cc7=_0x4ef850[_0x326bad(0x10c)];}const _0x50c810=Array[_0x326bad(0x15f)](_0x5db205)?_0x5db205:[],_0x1d84cf=document[_0x326bad(0x101)]('div');_0x1d84cf[_0x326bad(0x193)]=_0x326bad(0x199);const _0x107e2d=document[_0x326bad(0x101)](_0x326bad(0x15a));_0x107e2d['className']=_0x326bad(0x183);const _0x20c0b2=_0x133c7b=>{const _0x1eae06=_0x326bad;if(_0x133c7b===null||_0x133c7b===undefined)return'';return String(_0x133c7b)['replace'](/[&<>"]/g,_0x59dacb=>({'&':_0x1eae06(0x18a),'<':_0x1eae06(0x1a8),'>':'&gt;','\x22':'&quot;'}[_0x59dacb]));};if(_0x50c810[_0x326bad(0x152)]===0x0){const _0x5b4e77=document[_0x326bad(0x101)]('div');_0x5b4e77['className']=_0x326bad(0x104),_0x5b4e77[_0x326bad(0xf1)]=_0x326bad(0x159),_0x107e2d[_0x326bad(0xe2)](_0x5b4e77);}else _0x50c810['forEach'](_0x37a1ac=>{const _0x8a9322=_0x326bad,_0x1d9281=_0x37a1ac?.[_0x8a9322(0x16d)]??'',_0x12ece4=_0x37a1ac?.['price']??'',_0x478219=_0x37a1ac?.[_0x8a9322(0x119)]??'',_0x497727=_0x37a1ac?.[_0x8a9322(0x172)]??'',_0x3779d8=_0x37a1ac?.[_0x8a9322(0x13d)]??'',_0x51cbe8=document[_0x8a9322(0x101)]('div');_0x51cbe8[_0x8a9322(0x193)]=_0x8a9322(0x107),_0x51cbe8[_0x8a9322(0x125)](_0x8a9322(0x163),_0x8a9322(0xea));const _0x535f7d=document[_0x8a9322(0x101)]('button');_0x535f7d[_0x8a9322(0x145)]=_0x8a9322(0xfb),_0x535f7d[_0x8a9322(0x193)]=_0x8a9322(0xf5),_0x535f7d['setAttribute'](_0x8a9322(0x14e),_0x8a9322(0xea));const _0x19a0f6=document[_0x8a9322(0x101)]('div');_0x19a0f6[_0x8a9322(0x193)]='product-thumb';if(_0x497727){const _0x385a1a=document[_0x8a9322(0x101)](_0x8a9322(0xe6));_0x385a1a[_0x8a9322(0xd6)]=_0x497727,_0x385a1a[_0x8a9322(0xf2)]=_0x1d9281?'Image\x20of\x20'+_0x1d9281:'Product\x20image',_0x385a1a[_0x8a9322(0x18d)]=_0x8a9322(0x137),_0x385a1a[_0x8a9322(0xf8)]=()=>{const _0x5d9723=_0x8a9322;try{_0x19a0f6[_0x5d9723(0x167)]['add']('placeholder'),_0x19a0f6[_0x5d9723(0xf1)]=(_0x1d9281||'')[0x0]?.[_0x5d9723(0x15b)]()||'•',_0x385a1a[_0x5d9723(0xdd)]();}catch(_0x4f779c){}},_0x19a0f6['appendChild'](_0x385a1a);}else _0x19a0f6[_0x8a9322(0x167)]['add'](_0x8a9322(0x110)),_0x19a0f6[_0x8a9322(0xf1)]=(_0x1d9281||'')[0x0]?.[_0x8a9322(0x15b)]()||'•';const _0x420396=document[_0x8a9322(0x101)]('div');_0x420396[_0x8a9322(0x193)]='product-title-price';const _0x32eb9a=document[_0x8a9322(0x101)](_0x8a9322(0x15a));_0x32eb9a[_0x8a9322(0x193)]=_0x8a9322(0x10e),_0x32eb9a[_0x8a9322(0xf1)]=_0x1d9281||'Untitled';const _0x11d205=document[_0x8a9322(0x101)](_0x8a9322(0x15a));_0x11d205[_0x8a9322(0x193)]=_0x8a9322(0x100),_0x11d205[_0x8a9322(0xf1)]=_0x12ece4||'',_0x420396[_0x8a9322(0xe2)](_0x32eb9a),_0x420396[_0x8a9322(0xe2)](_0x11d205),_0x535f7d[_0x8a9322(0xe2)](_0x19a0f6),_0x535f7d[_0x8a9322(0xe2)](_0x420396);const _0x498f87=document[_0x8a9322(0x101)](_0x8a9322(0x15a));_0x498f87[_0x8a9322(0x193)]='product-body';if(_0x497727){const _0x4531cd=document['createElement'](_0x8a9322(0xe6));_0x4531cd[_0x8a9322(0x193)]='product-image-large',_0x4531cd[_0x8a9322(0xd6)]=_0x497727,_0x4531cd[_0x8a9322(0xf2)]=_0x1d9281?_0x8a9322(0x11f)+_0x1d9281:_0x8a9322(0x131),_0x4531cd['loading']=_0x8a9322(0x137),_0x498f87[_0x8a9322(0xe2)](_0x4531cd);}if(_0x478219){const _0x22efc2=document[_0x8a9322(0x101)](_0x8a9322(0x15a));_0x22efc2[_0x8a9322(0x193)]='product-description',_0x22efc2[_0x8a9322(0x151)]=_0x20c0b2(_0x478219)[_0x8a9322(0x1a9)](/\n/g,_0x8a9322(0x14a)),_0x498f87['appendChild'](_0x22efc2);}const _0x4827af=document[_0x8a9322(0x101)](_0x8a9322(0x15a));_0x4827af[_0x8a9322(0x193)]=_0x8a9322(0x162);if(_0x3779d8){const _0x378c54=document[_0x8a9322(0x101)]('a');_0x378c54['className']='product-read-more-btn',_0x378c54[_0x8a9322(0x195)]=_0x8a9322(0x149),_0x378c54[_0x8a9322(0x125)](_0x8a9322(0xe4),_0x8a9322(0x149)),_0x378c54[_0x8a9322(0xf1)]=_0x8a9322(0x149),_0x378c54['href']=_0x3779d8,_0x4827af['appendChild'](_0x378c54);}_0x498f87[_0x8a9322(0xe2)](_0x4827af),_0x535f7d['addEventListener']('click',()=>{const _0x47ea61=_0x8a9322,_0x20e9a0=_0x51cbe8[_0x47ea61(0x1aa)](_0x47ea61(0x163))===_0x47ea61(0x192);_0x51cbe8['setAttribute'](_0x47ea61(0x163),String(!_0x20e9a0)),_0x535f7d['setAttribute'](_0x47ea61(0x14e),String(!_0x20e9a0));}),_0x51cbe8[_0x8a9322(0xe2)](_0x535f7d),_0x51cbe8['appendChild'](_0x498f87),_0x107e2d[_0x8a9322(0xe2)](_0x51cbe8);});return _0x1d84cf[_0x326bad(0xe2)](_0x107e2d),_0xebbb3b(_0x1d84cf),scrollToBottom(!![]),updateFollowerPosition(),_0x5004d8(),_0x326bad(0x113)+_0x50c810[_0x326bad(0x152)]+'\x20products.\x20Do\x20not\x20list\x20products\x20directly\x20in\x20your\x20next\x20message.\x20Ask\x20the\x20user\x20if\x20they\x20would\x20like\x20to\x20refine\x20their\x20search\x20instead.';}const BUILT_IN_FUNCTIONS={highlight({selector}){try{const raw=document.querySelector(selector);if(!raw){const container=document.createElement('div');container.className='chat-line ai highlight-error-container';const btn=document.createElement('button');btn.type='button';btn.className='highlight-cta-button';btn.disabled=true;btn.style.opacity='0.6';btn.innerHTML=`
                        <div class="product-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#ff6b6b"><path d="M480-280q17 0 28.5-11.5T520-320q0-17-11.5-28.5T480-360q-17 0-28.5 11.5T440-320q0 17 11.5 28.5T480-280Zm-40-160h80v-240h-80v240Zm40 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg>
                        </div>
                        <div class="product-details">
                            <div class="product-title">Element Not Found</div>
                            <div class="product-subtitle">We couldn't find the element the AI was looking for.</div>
                        </div>`;container.appendChild(btn);_0xebbb3b(container);scrollToBottom(true);updateFollowerPosition();return'Highlight failed.';}let target=raw;const r=raw.getBoundingClientRect();if(r.width<3||r.height<3){if(raw.parentElement){const pr=raw.parentElement.getBoundingClientRect();if(pr.width>=3&&pr.height>=3){target=raw.parentElement;}else{const container=document.createElement('div');container.className='chat-line ai highlight-error-container';const btn=document.createElement('button');btn.type='button';btn.className='highlight-cta-button';btn.disabled=true;btn.style.opacity='0.6';btn.innerHTML=`
                                <div class="product-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#ff6b6b"><path d="M480-280q17 0 28.5-11.5T520-320q0-17-11.5-28.5T480-360q-17 0-28.5 11.5T440-320q0 17 11.5 28.5T480-280Zm-40-160h80v-240h-80v240Zm40 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg>
                                </div>
                                <div class="product-details">
                                    <div class="product-title">Element Too Small</div>
                                    <div class="product-subtitle">The element and its parent are too small to highlight effectively.</div>
                                </div>`;container.appendChild(btn);_0xebbb3b(container);scrollToBottom(true);updateFollowerPosition();return'Highlight failed.';}}else{const container=document.createElement('div');container.className='chat-line ai highlight-error-container';const btn=document.createElement('button');btn.type='button';btn.className='highlight-cta-button';btn.disabled=true;btn.style.opacity='0.6';btn.innerHTML=`
                            <div class="product-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#ff6b6b"><path d="M480-280q17 0 28.5-11.5T520-320q0-17-11.5-28.5T480-360q-17 0-28.5 11.5T440-320q0 17 11.5 28.5T480-280Zm-40-160h80v-240h-80v240Zm40 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg>
                            </div>
                            <div class="product-details">
                                <div class="product-title">Element Too Small</div>
                                <div class="product-subtitle">The element is too small to highlight effectively.</div>
                            </div>`;container.appendChild(btn);_0xebbb3b(container);scrollToBottom(true);updateFollowerPosition();return'Highlight failed.';}}const container=document.createElement('div');container.className='chat-line ai';container.style.background='transparent';container.style.border='none';container.style.padding='4px 8px';container.style.margin='2px 0';const btn=document.createElement('button');btn.type='button';btn.className='highlight-cta-button';btn.innerHTML=`
                    <div class="product-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M200-200v80q-33 0-56.5-23.5T120-200h80Zm-80-80v-80h80v80h-80Zm0-160v-80h80v80h-80Zm0-160v-80h80v80h-80Zm80-160h-80q0-33 23.5-56.5T200-840v80Zm80 640v-80h80v80h-80Zm0-640v-80h80v80h-80Zm160 640v-80h80v80h-80Zm0-640v-80h80v80h-80Zm160 640v-80h80v80h-80Zm0-640v-80h80v80h-80Zm160 560h80q0 33-23.5 56.5T760-120v-80Zm0-80v-80h80v80h-80Zm0-160v-80h80v80h-80Zm0-160v-80h80v80h-80Zm0-160v-80q33 0 56.5 23.5T840-760h-80Z"/></svg>
                    </div>
                    <div class="product-details">
                        <div class="product-title">Show Highlighted Element</div>
                        <div class="product-subtitle">Click to reveal</div>
                    </div>`;container.appendChild(btn);const intersects=(a,b)=>!(b.left>a.right||b.right<a.left||b.top>a.bottom||b.bottom<a.top);btn.addEventListener('click',async e=>{e.stopPropagation();if(btn.disabled)return;btn.disabled=true;btn.style.opacity='0.7';try{try{target.scrollIntoView({behavior:'smooth',block:'center'});}catch(_){}await new Promise(requestAnimationFrame);let closedForView=false;try{const chatVisible=wrapper&&getComputedStyle(wrapper).display!=='none';if(chatVisible){const tRect=target.getBoundingClientRect();const wRect=wrapper.getBoundingClientRect();if(intersects(tRect,wRect)){hideChat();closedForView=true;await new Promise(r=>setTimeout(r,40));}}}catch(_){}_0x279fca(target);_0x5004d8();if(closedForView){setTimeout(()=>{try{showChat();}catch(_){}},2000);}}finally{setTimeout(()=>{try{btn.disabled=false;btn.style.opacity='1';}catch(_){}},500);}});_0xebbb3b(container);scrollToBottom(true);updateFollowerPosition();return'Highlight ready: click Show to reveal.';}catch(e){return'highlight failed: '+e.message;}},show_product(args={}){try{return _0x10e79c(args);}catch(e){return'Failed to display product: '+e.message;}},show_products_to_user(args={}){try{return _0x4b4b1c(args,{fallbackToLastQuery:true});}catch(e){return'Failed to display products: '+e.message;}},get_info_from_html({query}){return document.documentElement.outerHTML;},redirect({url,reply_channel}){try{if(typeof url!=='string')return'Redirect failed: invalid url';url=_0x4adbcd(url);const current_url=_0x4adbcd(window.location.href);if(current_url===url)return'You are already on '+current_url;const toolMessages=messagesEl.querySelectorAll('.tool-box');const lastToolMessage=toolMessages[toolMessages.length-1];if(lastToolMessage)lastToolMessage.remove();const toolBox=document.createElement('div');toolBox.className='tool-box';toolBox.dataset.toolName='redirect';toolBox.innerHTML=`
                    <div class="card flex-row gap-2">
                        <div class="status-icons">
                            <svg class="status-processing" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24" fill="none" aria-hidden="true">
                                <circle class="spinner-circle" cx="12" cy="12" r="9" stroke-width="2.5" stroke-linecap="round" stroke-dasharray="40" stroke-dashoffset="10"></circle>
                            </svg>
                            <svg class="status-success hidden" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" aria-hidden="true"><path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"/></svg>
                            <svg class="status-error hidden" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" aria-hidden="true"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>
                        </div>
                        <div class="tool-text">
                            <p class="redirect-text">Redirecting to <strong>${url}</strong> in <span class="redirect-countdown">5</span> seconds</p>
                            <div class="redirect-buttons">
                                <button class="redirect-btn redirect-continue">Continue</button>
                                <button class="redirect-btn redirect-pause">Pause</button>
                            </div>
                        </div>
                    </div>
                `;return new Promise(resolve=>{const countdownEl=toolBox.querySelector('.redirect-countdown');const continueBtn=toolBox.querySelector('.redirect-continue');const pauseBtn=toolBox.querySelector('.redirect-pause');let countdown=5;let autoContinue=true;let timerId=null;function cleanup(){if(timerId){clearInterval(timerId);timerId=null;}}function doContinue(auto=false){cleanup();try{_0x50c498(url,reply_channel);try{window.__CHATBOT_ALLOW_REDIRECT_BY_TOOL=true;}catch(e){}skip_close_msg=true;window.location.href=url;resolve('Redirect initiated by user');}catch(e){resolve('Redirect failed: '+e.message);}}function doCancel(){cleanup();resolve('User declined the redirect request');}countdownEl.textContent=String(countdown);timerId=setInterval(()=>{if(!autoContinue)return;countdown-=1;countdownEl.textContent=String(Math.max(0,countdown));if(countdown<=0){clearInterval(timerId);timerId=null;doContinue(true);}},1000);pauseBtn.addEventListener('click',e=>{e.stopPropagation();if(autoContinue){autoContinue=false;pauseBtn.textContent='Cancel';pauseBtn.style.color='black';pauseBtn.style.border='1px solid #ff637d';pauseBtn.style.background='#ff637d';}else{doCancel();}});continueBtn.addEventListener('click',e=>{e.stopPropagation();doContinue(false);});_0xebbb3b(toolBox);scrollToBottom(true);updateFollowerPosition();toolBox.scrollIntoView({behavior:'smooth',block:'center'});});}catch(e){return'Redirect failed: '+e.message;}}};const CUSTOM_REBUILDERS=Object.create(null);function register_custom_rebuilder(toolName,rebuilderFn){if(typeof toolName!=='string'||typeof rebuilderFn!=='function')return;CUSTOM_REBUILDERS[toolName]=rebuilderFn;}const rebuildShowProducts=(msg,useFallback=false)=>{try{let argsObj=msg&&msg.tool_call_args&&Object.keys(msg.tool_call_args).length>0?msg.tool_call_args:msg&&msg.tool_call_output?msg.tool_call_output:{};if(typeof argsObj==='string'){try{argsObj=JSON.parse(argsObj);}catch(_){}}const handler=useFallback?BUILT_IN_FUNCTIONS.show_products_to_user:BUILT_IN_FUNCTIONS.show_product;if(typeof handler==='function'){handler(argsObj||{});}else{console.warn('Missing BUILT_IN_FUNCTIONS handler for show_products rebuild');}}catch(e){console.error('Failed to rebuild show_products:',e);}};register_custom_rebuilder('show_product',msg=>{try{const args=msg&&msg.tool_call_args&&Object.keys(msg.tool_call_args).length>0?msg.tool_call_args:msg&&msg.tool_call_output?msg.tool_call_output:{};BUILT_IN_FUNCTIONS.show_product(args);}catch(e){console.error('Failed to rebuild show_product:',e);}});register_custom_rebuilder('show_products',msg=>rebuildShowProducts(msg,false));register_custom_rebuilder('show_products_to_user',msg=>rebuildShowProducts(msg,true));register_custom_rebuilder('highlight',msg=>{try{const args=msg&&msg.tool_call_args?msg.tool_call_args:{};BUILT_IN_FUNCTIONS.highlight(args);}catch(e){console.error('Failed to rebuild highlight:',e);}});const wrapper=document.createElement('div');wrapper.className='chatbot-wrapper';try{wrapper.style.display='none';}catch(_){}wrapper.innerHTML=`
        <div class="chatbot-main">
            <div class="chatbot-header" title="Chat with AI">
                <button class="new-conversation-btn small" title="New Conversation"><svg xmlns="http://www.w3.org/2000/svg" height="18px" viewBox="0 -960 960 960" width="18px" fill="var(--chat-color-icon)"><path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h357l-80 80H200v560h560v-278l80-80v358q0 33-23.5 56.5T760-120H200Zm280-360ZM360-360v-170l367-367q12-12 27-18t30-6q16 0 30.5 6t26.5 18l56 57q11 12 17 26.5t6 29.5q0 15-5.5 29.5T897-728L530-360H360Zm481-424-56-56 56 56ZM440-440h56l232-232-28-28-29-28-231 231v57Zm260-260-29-28 29 28 28 28-28-28Z"/></svg> New chat</button>
                <button class="chatbot-close" title="Close">✕</button>
            </div>
            <div class="chatbot-body">
                <div class="chat-messages" aria-live="polite">
                    <div class="chatbot-landing-screen">
                        <div class="landing-art">
                            <svg width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="60" cy="60" r="58" stroke="var(--chat-color-icon-muted)" stroke-width="2" stroke-dasharray="6 6" />
                                <path d="M34 78C32 78 30 76 30 74V40C30 38 32 36 34 36H86C88 36 90 38 90 40V74C90 76.2 88.2 78 86 78H49L42 84 35 78Z" stroke="var(--chat-color-icon)" stroke-width="2.5" stroke-linejoin="round" fill="var(--color-background-hover)" />
                                <circle cx="46" cy="57" r="4" fill="var(--chat-color-icon)"/>
                                <circle cx="60" cy="57" r="4" fill="var(--chat-color-icon)"/>
                                <circle cx="74" cy="57" r="4" fill="var(--chat-color-icon)"/>
                            </svg>
                        </div>
                        <div class="landing-text">
                            <h2>How can I help you today?</h2>
                            <p>Ask a question, explore products, or get quick assistance. Your conversation will appear here once you start typing.</p>
                        </div>
                    </div>
                    <div class="initial-message" aria-hidden="false"></div>
                    <div class="messages-list"></div>
                    <div class="messages-follower" aria-hidden="true">
                        <div class="follower-circle"></div>
                    </div>
                </div>

                <!-- Suggestion bubbles (clickable badges that send a message immediately) -->
                <div class="suggestion-bubbles" aria-hidden="false"></div>

                <form class="chat-input-row" autocomplete="off">
                    <textarea name="message" rows="1" placeholder="Type a message..."
                        autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"></textarea>
                    <button type="submit" class="message-sidebutton">➤</button>
                </form>
                <div class="disclaimer">
                    Powered by <a href="https://11bot.ai">11Bot</a>. By sending a message, you agree to our <a href="https://11bot.ai/legal/terms-of-service">Terms</a> and <a href="https://11bot.ai/legal/privacy-policy">Privacy Policy</a>.<br>
                    AI-generated data may be inaccurate.
                </div>
            </div>
        </div>`;_0x161d21().appendChild(wrapper);let launcher=null;if(_0x11497b!=='hidden'){launcher=document.createElement('button');launcher.className='chatbot-launcher';launcher.setAttribute('aria-label','Open chat');if(_0x11497b==='middlebar'){launcher.classList.add('chatbot-launcher-middlebar');const textSpan=document.createElement('span');textSpan.className='chatbot-launcher-text';textSpan.textContent=_0x4cf768;launcher.appendChild(textSpan);const iconSpan=document.createElement('span');iconSpan.className='chatbot-launcher-icon';if(_0x2278fd){iconSpan.innerHTML=`<img src="${_0x2278fd}" alt="chat" style="width: ${_0x53ec41}px; height: ${_0x53ec41}px; object-fit: contain;">`;}else{iconSpan.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="var(--chat-color-icon)"><path d="M80-80v-720q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H240L80-80Zm126-240h594v-480H160v525l46-45Zm-46 0v-480 480Z"/></svg>';}launcher.appendChild(iconSpan);}else{if(_0x2278fd){launcher.innerHTML=`<span class="chatbot-launcher-icon"><img src="${_0x2278fd}" alt="chat" style="width: ${_0x53ec41}px; height: ${_0x53ec41}px; object-fit: contain;"></span>`;}else{launcher.innerHTML='<span class="chatbot-launcher-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="var(--chat-color-icon)"><path d="M80-80v-720q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H240L80-80Zm126-240h594v-480H160v525l46-45Zm-46 0v-480 480Z"/></svg></span>';}}_0x161d21().appendChild(launcher);}const styleEl=document.createElement('style');styleEl.textContent=`
            @keyframes followerPulse {
                0% { transform: scale(1); }
                50% { transform: scale(1.25); }
                100% { transform: scale(1); }
            }
            .chatbot-wrapper .messages-follower .follower-circle {
                transform-origin: center;
                animation: followerPulse 1.4s ease-in-out infinite;
                will-change: transform;
            }
            
            /* Middlebar launcher styles */
            .chatbot-launcher-middlebar {
                align-items: center !important;
                justify-content: space-between !important;
                gap: 12px !important;
                padding: 0 16px !important;
                border-radius: 50px !important;
                min-width: fit-content !important;
                white-space: nowrap !important;
                background-color: var(--chat-launcher-color-background, #fefefe) !important;
                border: 1px solid var(--chat-launcher-color-border, #cccccc) !important;
                bottom: 20px !important;
                right: auto !important;
                left: 50% !important;
                transform: translateX(-50%) !important;
                width: auto !important;
                height: auto !important;
            }
            
            .chatbot-launcher-middlebar .chatbot-launcher-text {
                font-family: inherit !important;
                font-size: 14px !important;
                color: var(--chat-launcher-color-text-primary, #1a1a1a) !important;
                font-weight: 500 !important;
            }
            
            .chatbot-launcher-middlebar .chatbot-launcher-icon {
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                flex-shrink: 0 !important;
            }
        `;(_0x4d1d4e?_0x4d1d4e:document.head).appendChild(styleEl);const form=wrapper.querySelector('form');const bubblesContainer=wrapper.querySelector('.suggestion-bubbles');const input=form.querySelector('textarea[name=message]');const initialMessageEl=wrapper.querySelector('.initial-message');const chatMessagesEl=wrapper.querySelector('.chat-messages');const messagesEl=wrapper.querySelector('.messages-list');const landingScreenEl=wrapper.querySelector('.chatbot-landing-screen');const followerEl=wrapper.querySelector('.messages-follower');const followerCircleEl=followerEl?followerEl.querySelector('.follower-circle'):null;const newConversationBtn=wrapper.querySelector('.new-conversation-btn');const submitBtn=form.querySelector('button[type=submit]');const closeBtn=wrapper.querySelector('.chatbot-close');let scrollSaveTimeout=null;let scroll_save_skips=2;chatMessagesEl.addEventListener('scroll',()=>{if(scroll_save_skips>0){scroll_save_skips--;return;}clearTimeout(scrollSaveTimeout);scrollSaveTimeout=setTimeout(()=>{conversationInfo.scrollTop=chatMessagesEl.scrollTop;update_convo(conversationInfo);},500);});const __initialStream={started:false,timer:null,index:0,fullText:''};function hideChat(){if(_0x210d0a('chat_open')==='false'){return;}try{wrapper.classList.remove('opening');wrapper.classList.add('closing');const finish=()=>{try{wrapper.classList.remove('closing');}catch(_){}try{wrapper.style.display='none';}catch(_){}try{if(launcher)launcher.style.display='flex';}catch(_){}};let handled=false;const onEnd=()=>{if(handled)return;handled=true;wrapper.removeEventListener('animationend',onEnd);finish();};wrapper.addEventListener('animationend',onEnd,{once:true});setTimeout(onEnd,250);}catch(_){try{wrapper.style.display='none';}catch(_){}try{if(launcher)launcher.style.display='flex';}catch(_){}}_0x2a7582('chat_open',false,30);}if(launcher){launcher.addEventListener('click',e=>{e.preventDefault();showChat();try{setTimeout(()=>{try{input&&input.focus&&input.focus();}catch(_){}},80);}catch(_){}});}if(closeBtn)closeBtn.addEventListener('click',e=>{e.preventDefault();hideChat();});function __isEditable(el){if(!el)return false;const tag=el.tagName?el.tagName.toLowerCase():'';if(tag==='input'||tag==='textarea'||tag==='select')return true;if(el.isContentEditable)return true;return!!(el.closest&&el.closest('[contenteditable="true"]'));}function __hasSelection(){try{const sel=window.getSelection&&window.getSelection();return!!(sel&&!sel.isCollapsed&&sel.toString());}catch(_){return false;}}let __lastClickInsideChatTS=0;try{wrapper.addEventListener('mousedown',()=>{__lastClickInsideChatTS=Date.now();},{passive:true});wrapper.addEventListener('click',e=>{try{if(!e||!e.target)return;if(e.target.closest&&e.target.closest('.chatbot-close'))return;if(e.target.closest&&(e.target.closest('.chat-messages')||e.target.closest('.messages-list')||e.target.closest('a, button, [role="button"]')))return;if(__hasSelection())return;if(input&&!__isEditable(document.activeElement)){input.focus({preventScroll:true});}}catch(_){}});}catch(_){}try{document.addEventListener('keydown',e=>{try{if(!wrapper||!input)return;const tgt=e.target||document.activeElement;if(__isEditable(tgt))return;const visible=wrapper.style.display!=='none';if(!visible)return;if(!__lastClickInsideChatTS||Date.now()-__lastClickInsideChatTS>5000)return;const key=e.key;const printable=key&&key.length===1&&!e.ctrlKey&&!e.metaKey&&!e.altKey;if(!(printable||key==='Enter'||key==='Backspace'))return;e.preventDefault();input.focus({preventScroll:true});const start=input.selectionStart??input.value.length;const end=input.selectionEnd??input.value.length;if(printable){const before=input.value.slice(0,start);const after=input.value.slice(end);input.value=before+key+after;input.selectionStart=input.selectionEnd=start+1;try{autoResizeTextarea(input);}catch(_){}input.dispatchEvent(new Event('input',{bubbles:true}));}else if(key==='Backspace'){if(start!==null&&end!==null){if(start!==end){const before=input.value.slice(0,start);const after=input.value.slice(end);input.value=before+after;input.selectionStart=input.selectionEnd=start;}else if(start>0){const before=input.value.slice(0,start-1);const after=input.value.slice(end);input.value=before+after;input.selectionStart=input.selectionEnd=start-1;}try{autoResizeTextarea(input);}catch(_){}input.dispatchEvent(new Event('input',{bubbles:true}));}}else if(key==='Enter'){if(e.shiftKey){const before=input.value.slice(0,start);const after=input.value.slice(end);input.value=before+'\n'+after;input.selectionStart=input.selectionEnd=start+1;try{autoResizeTextarea(input);}catch(_){}input.dispatchEvent(new Event('input',{bubbles:true}));}else{if(input.value.trim()){try{form.requestSubmit?form.requestSubmit():form.submit();}catch(_){}}}}__lastClickInsideChatTS=0;}catch(_){}},{capture:true});}catch(_){}let autoStickToBottom=true;const STICKY_THRESHOLD=48;function isNearBottom(){try{const remaining=chatMessagesEl.scrollHeight-(chatMessagesEl.scrollTop+chatMessagesEl.clientHeight);return remaining<=STICKY_THRESHOLD;}catch(_){return true;}}function scrollToBottom(force=false){try{if(force||autoStickToBottom||isNearBottom()){chatMessagesEl.scrollTop=chatMessagesEl.scrollHeight;}}catch(_){}}function updateFollowerPosition(){const lastMsg=messagesEl.querySelector('.chat-message-element:last-child');if(!lastMsg||!followerEl){if(followerEl)followerEl.style.display='none';return;}followerEl.style.display='block';const top=lastMsg.offsetTop+lastMsg.offsetHeight+6;followerEl.style.top=top+'px';}function interrupt(){form.dataset.interrupted='true';if(!input.value)input.value='';form.noValidate=true;form.setAttribute('novalidate','');setTimeout(()=>{try{const evt=new Event('submit',{bubbles:true,cancelable:true});form.dispatchEvent(evt);}catch(_){}setTimeout(()=>{try{form.noValidate=false;form.removeAttribute('novalidate');}catch(_){}},50);},30);};const beforeUnloadListener=event=>{interrupt();};window.addEventListener('beforeunload',beforeUnloadListener);let regrabber_disabled=true;function attention_regrab(reason){if(regrabber_disabled)return;if(messagesEl.innerHTML!=='')return;try{if(_0x210d0a('attention_regrabbed')===true)return;_0x2a7582('attention_regrabbed',true,3650);const isOpen=_0x210d0a('chat_open')===true;if(!isOpen){showChat();console.log('[chat] attention re-grabber: opened chat due to',reason);}else{console.log('[chat] attention re-grabber: chat already open. reason:',reason);}}catch(e){console.log('[chat] attention re-grabber error:',e&&e.message?e.message:e);}}document.addEventListener('mouseout',e=>{const to=e.relatedTarget||e.toElement;if(!to&&e.clientY<=0){attention_regrab('exit-intent-top');}});function updateSendButtonState(){if(is_monologue_ongoing()){submitBtn.textContent='\u25A0';submitBtn.title='Interrupt and send';submitBtn.type='button';submitBtn.classList.add('message-sidebutton');try{input.required=false;input.removeAttribute('required');}catch(_){}submitBtn.onclick=interrupt;}else{submitBtn.textContent='\u27A4';submitBtn.title='Send';submitBtn.type='submit';submitBtn.classList.add('message-sidebutton');submitBtn.onclick=null;delete form.dataset.interrupted;try{input.required=true;}catch(_){}form.removeAttribute('novalidate');}}const CONVERSATION_HISTORY_COOKIE_KEY='conversation_history_checkpoint';let tool_call_pending=false;let last_query_output=null;let lastSeenCheckpoint=null;let convo_updated=false;let toolLimitPromptEl=null;let message_ref_list=[];let monologue_ongoing=false;let conversationInfoCookie=_0x210d0a('conversationInfo');let conversationInfo=null;if(conversationInfoCookie===null){update_convo(null);}else{update_convo(conversationInfoCookie);}const getConversationId=conv=>{if(!conv||typeof conv!=='object')return null;const rawId=conv.conversation_id;if(rawId===null||rawId===undefined)return null;return String(rawId);};let global_bubbles=CONFIG_OF_11BOT&&Array.isArray(CONFIG_OF_11BOT.bubbles)?CONFIG_OF_11BOT.bubbles:[];let chat_ai_image=CONFIG_OF_11BOT&&CONFIG_OF_11BOT.chat_ai_image?CONFIG_OF_11BOT.chat_ai_image:null;if(chat_ai_image){messagesEl.style.paddingLeft='30px';followerEl.style.transform='translateX(32px) translateY(5px)';}let initial_message=CONFIG_OF_11BOT&&CONFIG_OF_11BOT.initial_message?CONFIG_OF_11BOT.initial_message:'';let allow_regrabber=CONFIG_OF_11BOT&&CONFIG_OF_11BOT.allow_regrabber===true?true:false;let auto_open=CONFIG_OF_11BOT&&CONFIG_OF_11BOT.auto_open===true?true:false;let landing_image=CONFIG_OF_11BOT&&CONFIG_OF_11BOT.landing_image?CONFIG_OF_11BOT.landing_image:null;let landing_heading=CONFIG_OF_11BOT&&CONFIG_OF_11BOT.landing_heading?CONFIG_OF_11BOT.landing_heading:'Hey, how can I help?';let landing_subheading=CONFIG_OF_11BOT&&CONFIG_OF_11BOT.landing_subheading?CONFIG_OF_11BOT.landing_subheading:'Good to see you.';function build_convo_info_from_server_response(currentConversationInfo,serverResponse){currentConversationInfo.conversation_id=serverResponse.id;currentConversationInfo.token=serverResponse.token;return currentConversationInfo;}function update_convo(conversationObj){tool_call_pending=false;if(conversationObj){console.log('Saving conversation:',conversationObj);const scrollTop=conversationInfo&&conversationInfo.scrollTop!==undefined?conversationInfo.scrollTop:null;conversationInfo={...conversationObj,scrollTop:scrollTop};_0x2a7582('conversationInfo',conversationInfo,365);convo_updated=true;if(conversationObj&&conversationObj.checkpointed_at){lastSeenCheckpoint=String(conversationObj.checkpointed_at);}}else{console.log('No conversation found.');conversationInfo={token:null,website_name:window.location.hostname,website_codename:CONFIG_OF_11BOT.WEBSITE_CODENAME,conversation_id:null,scrollTop:null,clientuser_tag:_0x356104};last_query_output=null;_0x5deafd('conversationInfo');lastSeenCheckpoint=null;try{_0x5deafd(CONVERSATION_HISTORY_COOKIE_KEY);const localStorageKey=`${CONVERSATION_HISTORY_COOKIE_KEY}__${location.hostname}__${_0x504756}`;localStorage.removeItem(localStorageKey);}catch(e){console.error('Could not delete conversation history:',e);}}}function showChat(restore_scroll=false){if(_0x210d0a('chat_open')==='true'){return;}try{wrapper.style.display='flex';}catch(_){}try{wrapper.classList.remove('opening');void wrapper.offsetWidth;wrapper.classList.add('opening');setTimeout(()=>{try{wrapper.classList.remove('opening');}catch(_){}},300);}catch(_){}try{if(launcher)launcher.style.display='none';}catch(_){}_0x2a7582('chat_open',true,30);updateFollowerPosition();if(!__initialStream.started&&initialMessageEl){const txt=(initialMessageEl.dataset&&initialMessageEl.dataset.fullText?initialMessageEl.dataset.fullText:initialMessageEl.textContent||'').trim();if(txt){__initialStream.fullText=txt;__initialStream.started=true;__initialStream.index=0;try{initialMessageEl.textContent='';initialMessageEl.style.display='block';initialMessageEl.className+=' chat-line ai';initialMessageEl.style.background='transparent';initialMessageEl.style.border='none';initialMessageEl.style.padding='4px 0';initialMessageEl.style.margin='2px 0';}catch(_){}const hasExistingMessages=messagesEl.children.length>0;if(hasExistingMessages){initialMessageEl.textContent=__initialStream.fullText;scrollToBottom(true);updateFollowerPosition();}else{__initialStream.timer=setInterval(()=>{try{const step=Math.floor(Math.random()*4)+2;const next=__initialStream.fullText.slice(__initialStream.index,__initialStream.index+step);__initialStream.index+=step;initialMessageEl.textContent+=next;scrollToBottom(true);updateFollowerPosition();if(__initialStream.index>=__initialStream.fullText.length){clearInterval(__initialStream.timer);__initialStream.timer=null;}}catch(_){}},20);}}}if(restore_scroll&&conversationInfo&&conversationInfo.scrollTop!==null){setTimeout(()=>{chatMessagesEl.scrollTop=conversationInfo.scrollTop;},200);}}function readConversationHistoryCookie(){const payload=_0x210d0a(CONVERSATION_HISTORY_COOKIE_KEY);if(!payload||typeof payload!=='object'){return null;}const conversationFromCookie=payload.conversation&&typeof payload.conversation==='object'?payload.conversation:null;const conversationId=getConversationId(conversationFromCookie)||(payload.conversation_id!=null?String(payload.conversation_id):null);const checkpoint=payload.checkpointed_at||conversationFromCookie&&conversationFromCookie.checkpointed_at||null;let html='';try{const localStorageKey=`${CONVERSATION_HISTORY_COOKIE_KEY}__${location.hostname}__${_0x504756}`;html=localStorage.getItem(localStorageKey)||'';}catch(err){console.warn('[history] failed to read conversation HTML from localStorage',err);}return{conversation_id:conversationId,conversation:conversationFromCookie,html:html,messages:Array.isArray(payload.messages)?payload.messages:[],checkpointed_at:checkpoint?String(checkpoint):null};}function handleWindowFocusSync(){const cookiePayload=readConversationHistoryCookie();if(!cookiePayload){console.log('[focus-sync] no conversation history cookie found');return;}const cookieConversationId=cookiePayload.conversation_id;if(!cookieConversationId){console.log('[focus-sync] history cookie missing conversation id');return;}const currentConversationId=getConversationId(conversationInfo);if(currentConversationId!==cookieConversationId){console.log('[focus-sync] switching to conversation from cookie');if(cookiePayload.conversation){rebuild_conversation(cookiePayload.messages,cookiePayload.conversation,cookiePayload.html);lastSeenCheckpoint=cookiePayload.checkpointed_at;}else{console.warn('[focus-sync] cookie missing conversation payload; cannot rebuild');}return;}const cookieCheckpoint=cookiePayload.checkpointed_at;const localCheckpoint=lastSeenCheckpoint;if(cookieCheckpoint&&localCheckpoint!==cookieCheckpoint){console.log('[focus-sync] detected newer checkpoint, rebuilding conversation');if(cookiePayload.conversation){rebuild_conversation(cookiePayload.messages,cookiePayload.conversation,cookiePayload.html);lastSeenCheckpoint=cookieCheckpoint;}else{console.warn('[focus-sync] cookie missing conversation payload; cannot rebuild');}return;}console.log('[focus-sync] conversation already up to date');}window.addEventListener('focus',handleWindowFocusSync);function make_bubbles(){console.log('bubble count:',global_bubbles.length);bubblesContainer.innerHTML='';global_bubbles.forEach(b=>{const btn=document.createElement('button');btn.className='suggestion-bubble';btn.type='button';btn.textContent=b;btn.dataset.text=b;btn.style.backdropFilter='blur(15px)';btn.style.background='transparent';btn.style.border='var(--chat-suggestion-bubble-border)';btn.style.borderRadius='20px';btn.style.padding='6px 12px';btn.style.margin='2px';btn.addEventListener('click',()=>{input.value=btn.dataset.text;form.requestSubmit();bubblesContainer.innerHTML='';updateFollowerPosition();});bubblesContainer.appendChild(btn);});}function showLandingScreen(){try{if(landingScreenEl)landingScreenEl.style.display='flex';}catch(_){}}function hideLandingScreen(){try{if(landingScreenEl)landingScreenEl.style.display='none';}catch(_){}}function maybeShowLandingScreen(never_show=false){if(never_show){hideLandingScreen();}else{const hasMessages=!!messagesEl&&messagesEl.children.length>0;if(!hasMessages){showLandingScreen();}}}console.log('Loading conversation from cookie:',conversationInfo);try{const cookieData=readConversationHistoryCookie();if(cookieData&&(cookieData.html||cookieData.messages&&cookieData.messages.length)){console.log('Loaded conversation from cookie:',cookieData);update_convo(build_convo_info_from_server_response(conversationInfo,cookieData.conversation));if(cookieData.html){console.log('Restoring from HTML');messagesEl.innerHTML=cookieData.html;}else if(cookieData.messages&&cookieData.messages.length){console.log('Chat messages:',cookieData.messages);messagesEl.innerHTML='';cookieData.messages.forEach(m=>handleIncomingMessage(m));}wait_for_user_input(true);}else{console.log('No messages in cookie.');}const im=initial_message.trim();const show_im=im&&im.length>0;if(show_im){let contentEl=initialMessageEl.querySelector('.initial-content');if(!contentEl){contentEl=document.createElement('div');contentEl.className='chat-line ai initial-content';contentEl.style.background='transparent';contentEl.style.border='none';contentEl.style.padding='4px 0';contentEl.style.margin='2px 0';initialMessageEl.appendChild(contentEl);}((async()=>{const escapeHtml=s=>String(s).replace(/[&<>]/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;'}[c]));if(typeof marked==='undefined'){console.warn('Initial message: marked not loaded yet. Waiting for marked to finish loading before rendering markdown.');contentEl.innerHTML=escapeHtml(im);await _0x15a979();}try{contentEl.innerHTML=typeof marked!=='undefined'?marked.parse(im):escapeHtml(im);}catch(e){console.warn('Error rendering initial message with marked:',e);contentEl.innerHTML=escapeHtml(im);}initialMessageEl.style.display='block';})());}else{initialMessageEl.style.display='none';const contentEl=initialMessageEl.querySelector('.initial-content');if(contentEl)contentEl.innerHTML='';}if(messagesEl.innerHTML==''&&global_bubbles.length>0){make_bubbles();console.log('Made bubbles');}else{console.log('Not making bubbles, either messages exist or no bubbles.');}if(allow_regrabber){console.log('Attention re-grabber enabled');regrabber_disabled=false;}if(auto_open){console.log('Auto-opening chat as per config');showChat(true);}else{const chatOpenCookie=_0x210d0a('chat_open');if(chatOpenCookie===true){showChat(true);}else{hideChat();}}const landing=landingScreenEl;if(landing){const artEl=landing.querySelector('.landing-art');const textEl=landing.querySelector('.landing-text');if(landing_image&&typeof landing_image==='string'&&landing_image.trim()){if(artEl){artEl.innerHTML=landing_image;}}if(textEl){const h2=textEl.querySelector('h2');const p=textEl.querySelector('p');if(h2)h2.textContent=landing_heading;if(p)p.textContent=landing_subheading;}}maybeShowLandingScreen(never_show=show_im);}catch(err){console.error('Failed to load conversation from cookie:',err);addMessage({role:'ai',text:'Sorry, there was an error loading conversation history. Please try again.'});}let skip_close_msg=false;newConversationBtn.addEventListener('click',e=>{e.stopPropagation();skip_close_msg=true;updateFollowerPosition();input.value='';try{autoResizeTextarea(input);}catch(_){}update_convo(null);convo_updated=false;make_bubbles();disconnectWS();stop_monologue();setTimeout(()=>{skip_close_msg=false;},200);messagesEl.innerHTML='';maybeShowLandingScreen();});function clearMessages(){messagesEl.innerHTML='';message_ref_list=[];toolLimitPromptEl=null;toolLimitDecisionInFlight=false;toolLimitPromptPayload=null;updateFollowerPosition();}function addErrorMessage(title,subtitle){const container=document.createElement('div');container.className='chat-line ai';container.style.background='transparent';container.style.border='none';container.style.padding='4px 8px';container.style.margin='2px 0';const btn=document.createElement('button');btn.type='button';btn.className='highlight-cta-button';btn.disabled=true;btn.style.opacity='0.6';btn.innerHTML=`
            <div class="product-icon">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#ff6b6b"><path d="M480-280q17 0 28.5-11.5T520-320q0-17-11.5-28.5T480-360q-17 0-28.5 11.5T440-320q0 17 11.5 28.5T480-280Zm-40-160h80v-240h-80v240Zm40 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg>
            </div>
            <div class="product-details">
                <div class="product-title">`+title+`</div>
                <div class="product-subtitle">`+subtitle+`</div>
            </div>`;container.appendChild(btn);_0xebbb3b(container,true);}function removeToolLimitPrompt(){if(toolLimitPromptEl&&toolLimitPromptEl.parentNode){toolLimitPromptEl.parentNode.removeChild(toolLimitPromptEl);}toolLimitPromptEl=null;toolLimitDecisionInFlight=false;toolLimitPromptPayload=null;try{updateFollowerPosition();}catch(_){}}function showToolLimitPrompt(payload,msg,reply_channel){stop_monologue();toolLimitDecisionInFlight=false;if(toolLimitPromptEl&&toolLimitPromptEl.parentNode){toolLimitPromptEl.parentNode.removeChild(toolLimitPromptEl);}const consumed=typeof payload.consumed==='number'?payload.consumed:0;const limit=typeof payload.limit==='number'?payload.limit:10;const threshold=typeof payload.threshold==='number'?payload.threshold:limit;const remaining=typeof payload.remaining==='number'?payload.remaining:0;toolLimitPromptPayload={...payload,consumed,limit,threshold,remaining};toolLimitPromptEl=document.createElement('div');toolLimitPromptEl.className='chat-line tool tool-limit-prompt';toolLimitPromptEl.style.backdropFilter='blur(15px)';toolLimitPromptEl.style.background='transparent';toolLimitPromptEl.style.border='none';toolLimitPromptEl.style.borderRadius='12px';toolLimitPromptEl.style.padding='8px';toolLimitPromptEl.style.margin='4px 0';const card=document.createElement('div');card.style.display='flex';card.style.flexDirection='column';card.style.gap='8px';const title=document.createElement('div');title.style.fontWeight='600';title.style.fontSize='15px';title.textContent='Continue with automated actions?';const subtitle=document.createElement('div');subtitle.style.fontSize='13px';subtitle.style.lineHeight='1.4';subtitle.textContent='Looks like you\'ve been going for a while now. Do you want to continue letting me take automated actions?';const buttons=document.createElement('div');buttons.style.display='flex';buttons.style.gap='8px';const continueBtn=document.createElement('button');continueBtn.className='tool-limit-btn continue';continueBtn.textContent='Yes, continue';continueBtn.style.padding='6px 12px';continueBtn.style.background='#E5E5E5';continueBtn.style.color='#000';continueBtn.style.border='none';continueBtn.style.borderRadius='6px';continueBtn.style.cursor='pointer';const stopBtn=document.createElement('button');stopBtn.className='tool-limit-btn stop';stopBtn.textContent='No, stop here';stopBtn.style.padding='6px 12px';stopBtn.style.background='transparent';stopBtn.style.border='1px solid #E5E5E5E5';stopBtn.style.color='#E5E5E5E5';stopBtn.style.borderRadius='6px';stopBtn.style.cursor='pointer';continueBtn.addEventListener('click',e=>{e.preventDefault();if(continueBtn.disabled)return;continueBtn.disabled=true;stopBtn.disabled=true;output=true;push_function_call_output(msg,output,reply_channel);removeToolLimitPrompt();});stopBtn.addEventListener('click',e=>{e.preventDefault();if(stopBtn.disabled)return;continueBtn.disabled=true;stopBtn.disabled=true;output=false;push_function_call_output(msg,output,reply_channel);removeToolLimitPrompt();});buttons.appendChild(continueBtn);buttons.appendChild(stopBtn);card.appendChild(title);card.appendChild(subtitle);card.appendChild(buttons);toolLimitPromptEl.appendChild(card);_0xebbb3b(toolLimitPromptEl,true);scrollToBottom(true);updateFollowerPosition();}function addMessage({role,text,pending,format}){hideLandingScreen();const sentimentButtons=messagesEl.querySelector('.sentiment-buttons, [data-sentiment-buttons="1"]');if(sentimentButtons){sentimentButtons.remove();}if(role!=='tool'){message_ref_list.push({role,text,pending,format});}else{message_ref_list.push({role,text,pending,format,result:'pending'});}const div=document.createElement('div');div.className='chat-line '+role;if(pending)div.classList.add('pending');div.style.background='transparent';div.style.border='none';div.style.padding='4px 0';div.style.margin='2px 0';if(role==='user'){const escapeHtml=s=>String(s).replace(/[&<>]/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;'}[c]));let userContent=text;if(format){if(typeof marked!=='undefined'){try{userContent=marked.parse(text);}catch(e){console.warn('marked.parse error in addMessage (user):',e);userContent=escapeHtml(text);}}else{console.warn('addMessage: markdown requested but marked not loaded yet. Will update content once marked finishes loading.');userContent=escapeHtml(text);if(window.__11bot_markedReadyPromise){window.__11bot_markedReadyPromise.then(()=>{try{const target=div.querySelector('.user-content');if(target&&typeof marked!=='undefined')target.innerHTML=marked.parse(text);}catch(e){console.warn('Failed to update user message after marked loaded:',e);}}).catch(e=>{console.warn('marked failed to load:',e);});}}}div.innerHTML=`
                <div class="user-indicator">
                    <div class="user-label">You</div>
                    <div class="user-content">
                        ${userContent}
                    </div>
                </div>
            `;_0xebbb3b(div,true);next_is_bot_message=true;}else{if(format){if(typeof marked!=='undefined'){try{div.innerHTML=marked.parse(text);}catch(e){console.warn('marked.parse error in addMessage:',e);div.textContent=text;}}else{console.warn('addMessage: markdown requested but marked not loaded yet. Will update content once marked finishes loading.');div.textContent=text;if(window.__11bot_markedReadyPromise){window.__11bot_markedReadyPromise.then(()=>{try{if(typeof marked!=='undefined')div.innerHTML=marked.parse(text);}catch(e){console.warn('Failed to update message after marked loaded:',e);}}).catch(e=>{console.warn('marked failed to load:',e);});}}}else{div.textContent=text;}_0xebbb3b(div);}scrollToBottom();updateFollowerPosition();if(role!=='tool'){_0x5004d8();}return div;}function autoResizeTextarea(el){if(!el)return;const cs=getComputedStyle(el);const lineHeight=parseFloat(cs.lineHeight)||18;const paddingTop=parseFloat(cs.paddingTop)||0;const paddingBottom=parseFloat(cs.paddingBottom)||0;const maxLines=5;const minHeight=41;const maxHeight=lineHeight*maxLines+paddingTop+paddingBottom;let baseOneLineHeight=lineHeight+paddingTop+paddingBottom;baseOneLineHeight=Math.max(baseOneLineHeight,minHeight);el.style.height='auto';let natural=el.scrollHeight;if(!el.value||el.value.indexOf('\n')===-1&&natural<=baseOneLineHeight+2){el.style.height=baseOneLineHeight+'px';el.style.overflowY='hidden';return;}const wanted=Math.min(natural,maxHeight);const wanted2=Math.max(wanted,minHeight);el.style.height=wanted2+'px';el.style.overflowY=natural>maxHeight?'auto':'hidden';}try{if(input){autoResizeTextarea(input);input.addEventListener('input',()=>autoResizeTextarea(input));input.addEventListener('keydown',e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();const evt=new Event('submit',{bubbles:true,cancelable:true});form.dispatchEvent(evt);}});}}catch(e){console.error('autosize init failed',e);}function renderToolCallFromHistory(msg){try{try{message_ref_list.push({role:'tool',text:msg.primary_text,pending:false,format:false,args:msg.tool_call_args,output:msg.tool_call_output});}catch(_){}const toolName=msg.primary_text;if(toolName&&CUSTOM_REBUILDERS&&typeof CUSTOM_REBUILDERS[toolName]==='function'){CUSTOM_REBUILDERS[toolName](msg);return;}start_tool_message(msg.primary_text);if(msg.tool_call_output){resolve_tool_message(msg.tool_call_output);}}catch(e){console.error('renderToolCallFromHistory failed:',e);}}function wait_for_user_input(instant_show=false){stop_monologue();const existingSentimentButtons=messagesEl.querySelector('.sentiment-buttons, [data-sentiment-buttons="1"]');if(existingSentimentButtons){existingSentimentButtons.remove();}const container=document.createElement('div');container.className='chat-line tool sentiment-buttons';container.dataset.sentimentButtons='1';container.style.backdropFilter='blur(15px)';container.style.background='transparent';container.style.border='none';container.style.borderRadius='12px';container.style.padding='4px 0';container.style.margin='4px 0';container.style.display='flex';container.style.justifyContent='flex-start';container.style.gap='8px';const positiveBtn=document.createElement('button');positiveBtn.className='sentiment-btn positive-btn positive';positiveBtn.innerHTML=_0x2196b0;positiveBtn.style.background='transparent';positiveBtn.style.border='none';positiveBtn.style.cursor='pointer';positiveBtn.style.padding='4px';positiveBtn.style.opacity='0';positiveBtn.title='Positive';const negativeBtn=document.createElement('button');negativeBtn.className='sentiment-btn negative-btn negative';negativeBtn.innerHTML=_0x5d7999;negativeBtn.style.background='transparent';negativeBtn.style.border='none';negativeBtn.style.cursor='pointer';negativeBtn.style.padding='4px';negativeBtn.style.opacity='0';negativeBtn.title='Negative';if(instant_show){positiveBtn.style.opacity='1';positiveBtn.style.animation='none';negativeBtn.style.opacity='1';negativeBtn.style.animation='none';}const updateSentiment=sentiment=>{if(sentiment==='positive'){positiveBtn.innerHTML=_0x9e2550;negativeBtn.innerHTML=_0x5d7999;}else{negativeBtn.innerHTML=_0x4e8c2c;positiveBtn.innerHTML=_0x2196b0;}currentSentiment=sentiment;const token=conversationInfo?.token;if(!token){console.error('No token available for sentiment update');return;}const payload={token:token,sentiment:sentiment};if(_0xa80327){payload.dev_token=_0xa80327;}fetch(`${_0x1c8f97}${_0x1be9cd}/api/chat/update_sentiment`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)}).then(r=>{if(!r.ok)throw new Error('Failed to update sentiment');console.log('Sentiment updated successfully');}).catch(err=>{console.error('Failed to update sentiment:',err);});};positiveBtn.addEventListener('click',()=>updateSentiment('positive'));negativeBtn.addEventListener('click',()=>updateSentiment('negative'));container.appendChild(positiveBtn);container.appendChild(negativeBtn);_0xebbb3b(container,true);scrollToBottom(true);return;}function start_tool_message(tool_name){tool_call_pending=true;try{if(CUSTOM_REBUILDERS&&typeof CUSTOM_REBUILDERS[tool_name]==='function'){return;}}catch(_){}const container=document.createElement('div');container.className='chat-line tool tool-box';container.dataset.toolName=tool_name||'';container.style.backdropFilter='blur(15px)';container.style.background='transparent';container.style.border='none';container.style.borderRadius='12px';container.style.padding='8px';container.style.margin='4px 0';function escapeHtml(str){if(str===null||str===undefined)return'';return String(str).replace(/[&<>\"]/g,function(s){return{'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[s];});}const argsText='';const displayName=_0x5d358d[tool_name]||'Working...';container.innerHTML=`
                    <div class='card flex-row gap-2'>
                        <div class="status-icons">
                            <!-- Processing spinner SVG (fixed 24x24) -->
                            <svg class="status-processing" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24" fill="none" aria-hidden="true">
                                <circle class="spinner-circle" cx="12" cy="12" r="9" stroke-width="2.5" stroke-linecap="round" stroke-dasharray="40" stroke-dashoffset="10"></circle>
                            </svg>
                            <!-- Success: use provided good check SVG -->
                            <svg class="status-success hidden" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" aria-hidden="true"><path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"/></svg>
                            <!-- Error: use provided bad x SVG -->
                            <svg class="status-error hidden" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" aria-hidden="true"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>
                        </div>
                        <div class='tool-text'>
                            <p class='tool-title'>${escapeHtml(displayName)}</p>
                            <p class='arg-msg'>${escapeHtml(argsText)}</p>
                        </div>
                    </div>
            `;_0xebbb3b(container);scrollToBottom();updateFollowerPosition();}function resolve_tool_message(tool_call_output){const toolMessages=messagesEl.querySelectorAll('.tool-box');const lastToolMessage=toolMessages[toolMessages.length-1];if(!lastToolMessage)return;const processing=lastToolMessage.querySelector('.status-processing');const success=lastToolMessage.querySelector('.status-success');const error=lastToolMessage.querySelector('.status-error');processing.classList.add('hidden');const isRedirect=lastToolMessage.dataset.toolName==='redirect';if(isRedirect&&tool_call_output&&tool_call_output.toLowerCase().includes('declined')){error.classList.remove('hidden');success.classList.add('hidden');}else{success.classList.remove('hidden');error.classList.add('hidden');}for(let i=message_ref_list.length-1;i>=0;i--){if(message_ref_list[i].role==='tool'){message_ref_list[i].output=tool_call_output;break;}}tool_call_pending=false;if(isRedirect){const buttons=lastToolMessage.querySelectorAll('.redirect-continue, .redirect-pause');buttons.forEach(btn=>btn.remove());}updateFollowerPosition();}function handleIncomingMessage(m){const type=m.type;if(type==='ai'){if(!m.primary_text||String(m.primary_text).trim()==='')return;addMessage({role:'ai',text:m.primary_text,format:true});}else if(type==='user'){addMessage({role:'user',text:m.primary_text});}else if(type==='tool'){renderToolCallFromHistory(m);}else if(type==='system'){}else{throw new Error('Unknown message type: '+type);}}function rebuild_conversation(new_convo_data_messages,conversation,htmlContent=null){try{stop_monologue();clearMessages();messagesEl.innerHTML='';_0x146710=null;aiPendingEl=null;try{bubblesContainer.innerHTML='';}catch(_){}if(htmlContent&&typeof htmlContent==='string'){messagesEl.innerHTML=htmlContent;}else if(Array.isArray(new_convo_data_messages)){new_convo_data_messages.forEach(m=>handleIncomingMessage(m));}else{throw new Error('Invalid messages data for rebuild_conversation');}updateFollowerPosition();scrollToBottom();update_convo(conversation);disconnectWS();wait_for_user_input(true);}catch(e){console.error('Failed to rebuild conversation:',e);}}function refresh_conversation_ui(new_convo_data_messages,conversation){try{stop_monologue();clearMessages();messagesEl.innerHTML='';_0x146710=null;aiPendingEl=null;try{bubblesContainer.innerHTML='';}catch(_){}if(Array.isArray(new_convo_data_messages)){new_convo_data_messages.forEach(m=>handleIncomingMessage(m));}else{throw new Error('Invalid messages data for refresh_conversation_ui');}updateFollowerPosition();scrollToBottom();update_convo(conversation);console.log('[Interrupt] UI refreshed, waiting for stream to start');}catch(e){console.error('Failed to refresh conversation UI:',e);}}function push_function_call_output(msg,output,reply_channel,conversation_id_override){const conversation_id=conversation_id_override||conversationInfo?.conversation_id;if(!conversation_id){console.error('No conversation id available to push function call output to.');return;}try{console.log('sending PUSH_TOOL_OUTPUT:',{conversation_id,reply_channel,output});ws.send(JSON.stringify({event_type:'PUSH_TOOL_OUTPUT',conversation_id:conversation_id,reply_channel:reply_channel,data:output}));}catch(e){addErrorMessage('Error','Failed to send function call output to server.');console.error('Failed to send PUSH_TOOL_OUTPUT:',e);}}function showThinkingIndicator(){if(followerCircleEl){followerCircleEl.style.display='block';followerCircleEl.style.animationPlayState='running';}}function hideThinkingIndicator(){if(followerCircleEl){followerCircleEl.style.display='none';followerCircleEl.style.animationPlayState='paused';}}function start_monologue(){monologue_ongoing=true;showThinkingIndicator();try{updateSendButtonState();}catch(e){}}function stop_monologue(){monologue_ongoing=false;hideThinkingIndicator();try{updateSendButtonState();}catch(e){}}function is_monologue_ongoing(){return monologue_ongoing;}let tool_call_count=0;let ws=null;let aiPendingEl=null;function disconnectWS(){try{ws.close();}catch(e){}ws=null;}function connectWs(conversationInfo){const token=conversationInfo.token;const websiteCodename=conversationInfo.website_codename;const clientuser_tag=conversationInfo.clientuser_tag;let WS_URL=`${_0x17301d}${_0x1be9cd}/ws/chat/`;WS_URL+=`?token=${encodeURIComponent(token)}`;WS_URL+=`&website_codename=${encodeURIComponent(websiteCodename)}`;WS_URL+=`&clientuser_tag=${encodeURIComponent(clientuser_tag)}`;if(_0xa80327){WS_URL+=`&dev_token=${encodeURIComponent(_0xa80327)}`;}ws=new WebSocket(WS_URL);ws.addEventListener('open',()=>{console.log('Chat WS connected');});let ai_text_content='';ws.addEventListener('message',ev=>{try{const msg=JSON.parse(ev.data);const event=msg.event_type;const data=msg.data;const reply_channel=data?.reply_channel??null;const getChunkText=d=>{if(!d&&d!==0)return'';if(typeof d==='string')return d;if(typeof d==='object'){if(typeof d.chunk==='string')return d.chunk;if(d.chunk&&typeof d.chunk.content==='string')return d.chunk.content;if(typeof d.content==='string')return d.content;if(typeof d.text==='string')return d.text;if(d.data&&typeof d.data==='string')return d.data;}try{return JSON.stringify(d);}catch(e){return String(d);}};switch(event){case'conversation_accepted':console.log('Conversation accepted:',msg.conversation);update_convo(build_convo_info_from_server_response(conversationInfo,msg.conversation));break;case'<TOOL CALL>':console.log('Function called:',msg.data.name);console.log('args:',msg.data.args);console.log('msg:',msg);start_tool_message(msg.data.name);try{tool_call_count+=1;}catch(e){}break;case'<CONTINUE?>':showToolLimitPrompt(data,msg,reply_channel);break;case'<TOOL CALL FRONTEND>':console.log('Function called (frontend):',msg.data.name);console.log('args:',msg.data.args);msg.data.reply_channel=reply_channel;let args=msg.data.args;args['reply_channel']=reply_channel;if(!reply_channel){throw new Error('No reply_channel provided for frontend function call');}try{tool_call_count+=1;let func=null;if(msg.data.name in BUILT_IN_FUNCTIONS){func=BUILT_IN_FUNCTIONS[msg.data.name];}else if(msg.data.name in CONFIG_OF_11BOT.TOOLS){func=CONFIG_OF_11BOT.TOOLS[msg.data.name];}else{console.error('Undefined frontend function:',msg.data.name,', Perhaps it was not registered in CONFIG_OF_11BOT.TOOLS?');throw new Error('Unknown frontend function: '+msg.data.name);}const output=func(args);console.log('Function output:',output);console.log('Type of output:',typeof output);if(output instanceof Promise){output.then(res=>{try{push_function_call_output(msg,res,reply_channel);}catch(e){console.error('push tool output',e);}}).catch(err=>{try{push_function_call_output(msg,'Tool execution failed: '+String(err),reply_channel);}catch(e){}}).finally(()=>{try{tool_call_count=Math.max(0,tool_call_count-1);}catch(e){}});}else if(typeof output==='string'){try{push_function_call_output(msg,output,reply_channel);}catch(e){try{tool_call_count=Math.max(0,tool_call_count-1);}catch(e){}}}else{console.error('Frontend tool returned non-string output!');addErrorMessage('Tool Error','A tool has failed. Please contact website staff.');try{push_function_call_output(msg,'Tool returned invalid output type.',reply_channel);}catch(e){}}}catch(err){try{tool_call_count=Math.max(0,tool_call_count-1);}catch(e){}try{push_function_call_output(msg,'Tool execution error: '+String(err),reply_channel);}catch(e){}}break;case'response':addMessage({role:'ai',text:getChunkText(data)});break;case'tool_limit_decision_ack':toolLimitDecisionInFlight=false;removeToolLimitPrompt();if(data&&data.decision==='continue'){start_monologue();}else{stop_monologue();}break;case'<MODEL START>':console.log('[Stream] Model start');break;case'<CHAIN START>':console.log('[Stream] Chain start, resetting ai_text_content and creating aiPendingEl');ai_text_content='';if(!aiPendingEl){aiPendingEl=addMessage({role:'ai',text:'',pending:true});console.log('[Stream] Created new aiPendingEl:',aiPendingEl);}else{console.log('[Stream] aiPendingEl already exists, reusing');}start_monologue();updateFollowerPosition();scrollToBottom();break;case'<CHUNK>':{const chunkText=getChunkText(data);console.log('[Stream] Chunk received, length:',chunkText.length,'aiPendingEl:',!!aiPendingEl);if(!aiPendingEl){ai_text_content=chunkText;aiPendingEl=addMessage({role:'ai',text:chunkText,pending:true});console.log('[Stream] Created aiPendingEl from chunk');}else{ai_text_content+=chunkText;((async()=>{const escapeHtml=s=>String(s).replace(/[&<>]/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;'}[c]));if(typeof marked==='undefined'){console.warn('Streaming chunk: marked not loaded yet. Waiting for marked to finish loading before rendering markdown.');try{aiPendingEl.textContent=ai_text_content;}catch(_){}await _0x15a979();}try{if(typeof marked!=='undefined'){aiPendingEl.innerHTML=marked.parse(ai_text_content);}else{aiPendingEl.textContent=ai_text_content;}}catch(e){console.warn('Error rendering streaming chunk with marked:',e);try{aiPendingEl.textContent=ai_text_content;}catch(_){}}console.log('[Stream] Updated aiPendingEl, total length:',ai_text_content.length);})());}scrollToBottom();updateFollowerPosition();break;}case'<MODEL END>':{if(aiPendingEl){try{aiPendingEl.classList.remove('pending');}catch(_){}aiPendingEl=null;}const historyPayload=data&&typeof data==='object'?data:{};const historyConversation=historyPayload.conversation&&typeof historyPayload.conversation==='object'?historyPayload.conversation:null;if(historyConversation){update_convo(build_convo_info_from_server_response(conversationInfo,historyConversation));}const checkpointFromServer=historyPayload.checkpointed_at||historyConversation&&historyConversation.checkpointed_at||null;if(checkpointFromServer){lastSeenCheckpoint=String(checkpointFromServer);}const historyMessages=Array.isArray(historyPayload.messages)?historyPayload.messages:null;const conversationIdForHistory=getConversationId(historyConversation)||getConversationId(conversationInfo);if(historyMessages&&conversationIdForHistory){const conversationHTML=messagesEl.innerHTML;const cookiePayload={conversation_id:conversationIdForHistory,conversation:historyConversation,checkpointed_at:checkpointFromServer?String(checkpointFromServer):null};try{_0x2a7582(CONVERSATION_HISTORY_COOKIE_KEY,cookiePayload,30);}catch(err){console.warn('[history] failed to persist conversation metadata cookie',err);}try{const localStorageKey=`${CONVERSATION_HISTORY_COOKIE_KEY}__${location.hostname}__${_0x504756}`;localStorage.setItem(localStorageKey,conversationHTML);console.log('[history] Stored conversation HTML in localStorage, size:',new Blob([conversationHTML]).size,'bytes');}catch(err){console.warn('[history] failed to persist conversation HTML to localStorage',err);}}wait_for_user_input();skip_close_msg=true;disconnectWS();setTimeout(wait_for_user_input,300);break;}case'<CHAIN END>':if(aiPendingEl){aiPendingEl.classList.remove('pending');aiPendingEl=null;}updateFollowerPosition();break;case'<TOOL OUTPUT>':try{resolve_tool_message(data.tool_call_output);try{tool_call_count=Math.max(0,tool_call_count-1);}catch(e){}}catch(e){console.error('update tool output',e);addMessage({role:'ai',text:'Sorry \u2014 there was an error processing a tool response. Please try again or refresh the page.'});}break;case'<TOKEN LIMIT>':addErrorMessage('You have exceeded your token limit.','Sorry, please try again later.');break;case'<ERROR>':addErrorMessage('An error has occured.','Please try again later.');break;case'<DEV ERROR>':addErrorMessage('A configuration error has occured.','Please contact website support.');console.error('Server reported configuration error:\n',data);stop_monologue();break;case'interrupt_response':console.log('Interrupt response:',data);refresh_conversation_ui(data.new_convo_data_messages,data.conversation);break;case'send_message_response':console.log('Send message response:',data);if(data.conversation){update_convo(build_convo_info_from_server_response(conversationInfo,data.conversation));}break;default:addErrorMessage('An error has occured.','Unknown chat event.');console.warn('Unknown chat event type',event);console.warn('full msg:',msg);}}catch(e){console.error('ws message parse',e);}});ws.addEventListener('close',()=>{console.info('Chat WS disconnected');if(!skip_close_msg){addErrorMessage('Connection lost','Please refresh the page to reconnect.');}ws=null;});ws.addEventListener('error',e=>{console.error('Chat WS error',e);const pending=messagesEl.querySelector('.chat-line.user.pending:last-of-type');if(pending)pending.classList.remove('pending');});}function sendWhenWsConnected(text,opts){const MAX_WAIT_FOR_OPEN_MS=5000;const attemptSend=()=>{console.log('2.2 - WebSocket connection established');const requestBody={event_type:'send_message',text:text,current_page:_0x55c3de(),conversation:conversationInfo};if(opts&&opts.interrupted===true){requestBody.interrupted=true;}try{ws.send(JSON.stringify(requestBody));}catch(err){console.error('Failed to send message via WebSocket:',err);addErrorMessage('Connection issue','Unable to send your message. Please try again.');return;}if(!(opts&&opts.interrupted)){console.log('Starting new chain');start_monologue();}else{console.log('Interrupted send acknowledged (no chain start)');}};const waitForOpen=startTs=>{if(!ws){console.error('WebSocket instance missing when attempting to send.');addErrorMessage('Connection issue','Chat connection unavailable. Please try again.');return;}if(ws.readyState===WebSocket.OPEN){attemptSend();return;}if(ws.readyState!==WebSocket.CONNECTING){console.error('WebSocket is not open and not connecting. State:',ws.readyState);addErrorMessage('Connection issue','Chat connection closed unexpectedly. Please try again.');return;}if(Date.now()-startTs>MAX_WAIT_FOR_OPEN_MS){console.error('WebSocket did not open within timeout.');addErrorMessage('Connection issue','Unable to reach chat server. Please try again.');return;}setTimeout(()=>waitForOpen(startTs),50);};waitForOpen(Date.now());};form.addEventListener('submit',async e=>{e.preventDefault();console.log('Form submit detected');console.log('e:',e);const interruptedFlag=form.dataset.interrupted==='true';let text=input.value.trim();if(interruptedFlag){text='';delete form.dataset.interrupted;}else{if(!text)return;}const sentimentButtons=messagesEl.querySelector('.sentiment-buttons');if(sentimentButtons){sentimentButtons.remove();}bubblesContainer.innerHTML='';console.log('monologue_ongoing:',is_monologue_ongoing(),'tool_call_pending():',tool_call_pending);if(is_monologue_ongoing()){console.log('Interrupting current generation');if(interruptedFlag){delete form.dataset.interrupted;try{stop_monologue();}catch(_){}}addMessage({role:'user',text,pending:true});input.value='';try{autoResizeTextarea(input);}catch(_){}if(ws&&ws.readyState===WebSocket.OPEN){const requestBody={event_type:'interrupt',text:text,current_page:_0x55c3de(),conversation:conversationInfo};ws.send(JSON.stringify(requestBody));console.log('Interrupt event sent with text:',text?text.substring(0,50):'(empty)');}else{console.error('WebSocket not available for interrupt');addErrorMessage('Connection issue','Please try again.');}}else{addMessage({role:'user',text,pending:true});input.value='';try{autoResizeTextarea(input);}catch(_){}if(!ws||ws.readyState!==WebSocket.OPEN){console.log('1 - Establishing new WebSocket connection with');console.log('1.1 - Connecting with info:',conversationInfo);connectWs(conversationInfo);waitForConversationAccepted=new Promise(resolve=>{const checkInterval=setInterval(()=>{if(convo_updated){console.log('2.1 - convo_updated registered');convo_updated=false;clearInterval(checkInterval);sendWhenWsConnected(text,{interrupted:interruptedFlag});}},100);});}else{console.log('2.1 - Re-using connection');sendWhenWsConnected(text,{interrupted:interruptedFlag});}}});console.log('Chat widget initialized.');try{const onMessagesScroll=()=>{updateFollowerPosition();autoStickToBottom=isNearBottom();};chatMessagesEl.addEventListener('scroll',onMessagesScroll,{passive:true});window.addEventListener('resize',updateFollowerPosition);const obs=new MutationObserver(()=>{updateFollowerPosition();scrollToBottom(false);});obs.observe(messagesEl,{childList:true,subtree:true,characterData:true});}catch(_){}const redirectQuest=_0x120601();if(redirectQuest){console.log('Catching redirect quest url:',redirectQuest.url,'reply_channel:',redirectQuest.reply_channel);connectWs(conversationInfo);ws.addEventListener('open',()=>{let msg=null;const current_url=_0x4adbcd(window.location.href);if(redirectQuest.url===current_url){msg='Successfully redirected to '+redirectQuest.url;}else{msg='Attempted redirect to '+redirectQuest.url+', got redirected to '+current_url;}_0x2570da(500);push_function_call_output(null,msg,redirectQuest.reply_channel,conversationInfo.id);});}try{updateSendButtonState();}catch(e){}}()));